{"version":3,"sources":["show.js"],"names":["$","_Base","jQuery","support","cors","t","window","Base","_defineProperty","site","language","navigator","browserLanguage","toLowerCase","versions","userAgent","e","match","trident","presto","appVersion","gecko","indexOf","wechat","qq","weibo","webKit","ios","android","arguments","document","iPhone","n","iPad","webApp","i","clientWidth","style","fontSize","getPropertyValue","o","addEventListener","setSeo","documentElement","res","console","log","attr","data","alert","message","toggle","toggleClass","page","showList","length","undefined","that","this","showNav","getAjax","url","status","datas","list","pagesLength","count","pagesHtml","showitem","forEach","ele","title","file","time","html","Math","ceil","index","getQueryString","name","reg","RegExp","r","location","search","substr","context","image","onload","imgLoad","src","fns","fnf","ajax","type","dataType","postAjax","text","on","hasClass","pages","init"],"mappings":"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","file":"show.js","sourcesContent":["$(function () {\r\n  jQuery.support.cors = true;\r\n  let Base = window.Base || {};\r\n  Base = {\r\n    site: 'https://www.doubaner.top',\r\n    language: (navigator.browserLanguage || navigator.language).toLowerCase(),\r\n    versions: function () {\r\n      var e = navigator.userAgent, t = e.toLowerCase();\r\n      navigator.appVersion;\r\n      return {\r\n        wechat: \"micromessenger\" == t.match(/MicroMessenger/i),\r\n        qq: \"qq\" == t.match(/QQ/i),\r\n        weibo: \"weibo\" == t.match(/WeiBo/i),\r\n        trident: e.indexOf(\"Trident\") > -1,\r\n        presto: e.indexOf(\"Presto\") > -1,\r\n        webKit: e.indexOf(\"AppleWebKit\") > -1,\r\n        gecko: e.indexOf(\"Gecko\") > -1 && -1 == e.indexOf(\"KHTML\"),\r\n        mobile: !!e.match(/AppleWebKit.*Mobile.*/),\r\n        ios: !!e.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),\r\n        android: e.indexOf(\"Android\") > -1 || e.indexOf(\"Linux\") > -1,\r\n        iPhone: e.indexOf(\"iPhone\") > -1,\r\n        iPad: e.indexOf(\"iPad\") > -1,\r\n        webApp: -1 == e.indexOf(\"Safari\")\r\n      }\r\n    }(),\r\n    fontSize: function () {\r\n      var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window, t = e.document,\r\n        i = t.documentElement, n = \"orientationchange\" in e ? \"orientationchange\" : \"resize\",\r\n        o = function () {\r\n          var e = i.clientWidth || 375;\r\n          e > 750 && (e = 750), i.style.fontSize = e / 7.5 + \"px\"\r\n        };\r\n      window.getComputedStyle(i, null).getPropertyValue(\"font-size\") <= \"20px\" && o(), t.addEventListener && (e.addEventListener(n, o, !1), t.addEventListener(\"DOMContentLoaded\", o, !1))\r\n    },\r\n    setSeo() {\r\n      let that = this;\r\n      that.getAjax('/seo', {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          $(\"title\").text(res.data.title);\r\n          $(\"meta[name='keywords']\").attr('content', res.data['keywords']);\r\n          $(\"meta[name='description']\").attr('content', res.data['description']);\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      })\r\n\r\n    },\r\n    showNav() {\r\n      $(\".common-header ol\").toggle();\r\n      $(\"body\").toggleClass('header-active');\r\n    },\r\n    pagesLength: 1,\r\n    page: 1,\r\n    showList(page = 1) {\r\n      let that = this;\r\n      let url = `/publicity/${page}`;\r\n      that.getAjax(url, {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          let datas = res.data.list;\r\n          let count = res.data.count;\r\n          let pagesHtml = '';\r\n          if (datas.length > 0) {\r\n            let showitem = '';\r\n            datas.forEach(ele => {\r\n              showitem += `\r\n                            <li>\r\n                                <h3>${ele.title}</h3>\r\n                                <div>\r\n                                <a href=\"${that.site + ele.file}\" download=\"${that.site + ele.file}\">立即下载</a>\r\n                                <span>${ele.time}</span>\r\n</div>\r\n                            </li>\r\n                            `;\r\n            });\r\n            $(\"#show-list\").html(showitem);\r\n          } else {\r\n            $(\"#show-list\").html('<h3>这里还什么都没有</h3>');\r\n          }\r\n          that.pagesLength = Math.ceil(count / 8);\r\n          for (let index = 1; index <= that.pagesLength; index++) {\r\n            console.log(index);\r\n            if (index == page) {\r\n              pagesHtml += `<li class=\"active\" data-page=\"${index}\">${index}</li>`;\r\n            } else {\r\n              pagesHtml += `<li data-page=\"${index}\">${index}</li>`;\r\n            }\r\n          }\r\n          $(\"#show-pages\").html(pagesHtml);\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      });\r\n    },\r\n    getQueryString: function (name) {\r\n      var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n      var r = window.location.search.substr(1).match(reg); //获取url中\"?\"符后的字符串并正则匹配\r\n      var context = \"\";\r\n      if (r != null)\r\n        context = r[2];\r\n      reg = null;\r\n      r = null;\r\n      return context == null || context == \"\" || context == \"undefined\" ? \"\" : context;\r\n    },\r\n    imgLoad() {\r\n      let image = new Image();\r\n      image.onload = function () {\r\n        console.log('success');\r\n      },\r\n        image.onerror = function () {\r\n          this.src = that.site + +this.src;\r\n        }\r\n    },\r\n    getAjax(url, datas, fns, fnf) {\r\n      $.ajax({\r\n        type: \"GET\",\r\n        url: this.site + url,\r\n        data: datas,\r\n        dataType: 'JSON',\r\n        success: fns,\r\n        fail: fnf\r\n      });\r\n    },\r\n    postAjax(url, datas, fns, fnf) {\r\n      $.ajax({\r\n        type: \"POST\",\r\n        url: this.site + url,\r\n        data: datas,\r\n        dataType: 'json',\r\n        success: fns,\r\n        fail: fnf\r\n      });\r\n    },\r\n    setSeo() {\r\n      let that = this;\r\n      that.getAjax('/seo', {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          $(\"title\").text(res.data.title);\r\n          $(\"meta[name='keywords']\").attr('content', res.data['keywords']);\r\n          $(\"meta[name='description']\").attr('content', res.data['description']);\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      })\r\n\r\n    },\r\n    init() {\r\n      let that = this;\r\n      that.showList();\r\n      that.fontSize();\r\n      that.setSeo();\r\n      $(\".common-header ul\").on('click', function () {\r\n        that.showNav();\r\n      });\r\n      $(\"#show-pages\").on('click', 'li', function () {\r\n        if ($(this).hasClass('active')) {\r\n          return;\r\n        }\r\n        let pages = $(this).attr('data-page');\r\n        that.showList(pages);\r\n      });\r\n    }\r\n  };\r\n  Base.init();\r\n});"]}