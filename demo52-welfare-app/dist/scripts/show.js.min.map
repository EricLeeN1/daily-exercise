{"version":3,"sources":["show.js"],"names":["$","_Base","jQuery","support","cors","t","window","Base","_defineProperty","site","language","navigator","browserLanguage","toLowerCase","versions","userAgent","e","match","trident","presto","appVersion","gecko","indexOf","wechat","qq","weibo","webKit","ios","android","arguments","document","iPhone","n","iPad","webApp","i","clientWidth","style","fontSize","getPropertyValue","o","addEventListener","setSeo","documentElement","res","console","log","attr","data","alert","message","toggle","toggleClass","page","showList","length","undefined","that","this","showNav","getAjax","url","status","datas","list","pagesLength","count","pagesHtml","showitem","forEach","ele","file","time","html","index","name","reg","RegExp","r","location","search","substr","context","getQueryString","image","Image","onload","src","fnf","ajax","type","fns","fail","postAjax","text","title","on","hasClass","pages","init"],"mappings":"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","file":"show.js","sourcesContent":["$(function () {\r\n  jQuery.support.cors = true;\r\n  let Base = window.Base || {};\r\n  Base = {\r\n    site: 'https://www.doubaner.top',\r\n    language: (navigator.browserLanguage || navigator.language).toLowerCase(),\r\n    versions: function () {\r\n      var e = navigator.userAgent, t = e.toLowerCase();\r\n      navigator.appVersion;\r\n      return {\r\n        wechat: \"micromessenger\" == t.match(/MicroMessenger/i),\r\n        qq: \"qq\" == t.match(/QQ/i),\r\n        weibo: \"weibo\" == t.match(/WeiBo/i),\r\n        trident: e.indexOf(\"Trident\") > -1,\r\n        presto: e.indexOf(\"Presto\") > -1,\r\n        webKit: e.indexOf(\"AppleWebKit\") > -1,\r\n        gecko: e.indexOf(\"Gecko\") > -1 && -1 == e.indexOf(\"KHTML\"),\r\n        mobile: !!e.match(/AppleWebKit.*Mobile.*/),\r\n        ios: !!e.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),\r\n        android: e.indexOf(\"Android\") > -1 || e.indexOf(\"Linux\") > -1,\r\n        iPhone: e.indexOf(\"iPhone\") > -1,\r\n        iPad: e.indexOf(\"iPad\") > -1,\r\n        webApp: -1 == e.indexOf(\"Safari\")\r\n      }\r\n    }(),\r\n    fontSize: function () {\r\n      var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window, t = e.document,\r\n        i = t.documentElement, n = \"orientationchange\" in e ? \"orientationchange\" : \"resize\",\r\n        o = function () {\r\n          var e = i.clientWidth || 375;\r\n          e > 750 && (e = 750), i.style.fontSize = e / 7.5 + \"px\"\r\n        };\r\n      window.getComputedStyle(i, null).getPropertyValue(\"font-size\") <= \"20px\" && o(), t.addEventListener && (e.addEventListener(n, o, !1), t.addEventListener(\"DOMContentLoaded\", o, !1))\r\n    },\r\n    setSeo() {\r\n      let that = this;\r\n      that.getAjax('/seo', {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          $(\"title\").text(res.data.title);\r\n          $(\"meta[name='keywords']\").attr('content', res.data['keywords']);\r\n          $(\"meta[name='description']\").attr('content', res.data['description']);\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      })\r\n\r\n    },\r\n    showNav() {\r\n      $(\".common-header ol\").toggle();\r\n      $(\"body\").toggleClass('header-active');\r\n    },\r\n    pagesLength: 1,\r\n    page: 1,\r\n    showList(page = 1) {\r\n      let that = this;\r\n      let url = `/publicity/${page}`;\r\n      that.getAjax(url, {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          let datas = res.data.list;\r\n          let count = res.data.count;\r\n          let pagesHtml = '';\r\n          if (datas.length > 0) {\r\n            let showitem = '';\r\n            datas.forEach(ele => {\r\n              showitem += `\r\n  <li>\r\n    <a href=\"${that.site + ele.file}\" download=\"${that.site + ele.file}\">\r\n        <h3>${ele.title}</h3>\r\n            <span>${ele.time}</span>\r\n    </a>\r\n  </li>\r\n  `;\r\n            });\r\n            $(\"#show-list\").html(showitem);\r\n          } else {\r\n            $(\"#show-list\").html('<h3>这里还什么都没有</h3>');\r\n          }\r\n          that.pagesLength = Math.ceil(count / 8);\r\n          for (let index = 1; index <= that.pagesLength; index++) {\r\n            console.log(index);\r\n            if (index == page) {\r\n              pagesHtml += `<li class=\"active\" data-page=\"${index}\">${index}</li>`;\r\n            } else {\r\n              pagesHtml += `<li data-page=\"${index}\">${index}</li>`;\r\n            }\r\n          }\r\n          $(\"#show-pages\").html(pagesHtml);\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      });\r\n    },\r\n    getQueryString: function (name) {\r\n      var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n      var r = window.location.search.substr(1).match(reg); //获取url中\"?\"符后的字符串并正则匹配\r\n      var context = \"\";\r\n      if (r != null)\r\n        context = r[2];\r\n      reg = null;\r\n      r = null;\r\n      return context == null || context == \"\" || context == \"undefined\" ? \"\" : context;\r\n    },\r\n    imgLoad() {\r\n      let image = new Image();\r\n      image.onload = function () {\r\n        console.log('success');\r\n      },\r\n        image.onerror = function () {\r\n          this.src = that.site + +this.src;\r\n        }\r\n    },\r\n    getAjax(url, datas, fns, fnf) {\r\n      $.ajax({\r\n        type: \"GET\",\r\n        url: this.site + url,\r\n        data: datas,\r\n        dataType: 'JSON',\r\n        success: fns,\r\n        fail: fnf\r\n      });\r\n    },\r\n    postAjax(url, datas, fns, fnf) {\r\n      $.ajax({\r\n        type: \"POST\",\r\n        url: this.site + url,\r\n        data: datas,\r\n        dataType: 'json',\r\n        success: fns,\r\n        fail: fnf\r\n      });\r\n    },\r\n    setSeo() {\r\n      let that = this;\r\n      that.getAjax('/seo', {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          $(\"title\").text(res.data.title);\r\n          $(\"meta[name='keywords']\").attr('content', res.data['keywords']);\r\n          $(\"meta[name='description']\").attr('content', res.data['description']);\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      })\r\n\r\n    },\r\n    init() {\r\n      let that = this;\r\n      that.showList();\r\n      that.fontSize();\r\n      that.setSeo();\r\n      $(\".common-header ul\").on('click', function () {\r\n        that.showNav();\r\n      });\r\n      $(\"#show-pages\").on('click', 'li', function () {\r\n        if ($(this).hasClass('active')) {\r\n          return;\r\n        }\r\n        let pages = $(this).attr('data-page');\r\n        that.showList(pages);\r\n      });\r\n    }\r\n  };\r\n  Base.init();\r\n});"]}