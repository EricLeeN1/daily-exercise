"use strict";
$(function () {
    jQuery.support.cors = !0;
    var t, e;
    window.Base;
    ({
        site: "https://www.doubaner.top",
        language: (navigator.browserLanguage || navigator.language).toLowerCase(),
        versions: (e = navigator.userAgent, t = e.toLowerCase(), navigator.appVersion, {
            wechat: "micromessenger" == t.match(/MicroMessenger/i),
            qq: "qq" == t.match(/QQ/i),
            weibo: "weibo" == t.match(/WeiBo/i),
            trident: -1 < e.indexOf("Trident"),
            presto: -1 < e.indexOf("Presto"),
            webKit: -1 < e.indexOf("AppleWebKit"),
            gecko: -1 < e.indexOf("Gecko") && -1 == e.indexOf("KHTML"),
            mobile: !!e.match(/AppleWebKit.*Mobile.*/),
            ios: !!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
            android: -1 < e.indexOf("Android") || -1 < e.indexOf("Linux"),
            iPhone: -1 < e.indexOf("iPhone"),
            iPad: -1 < e.indexOf("iPad"),
            webApp: -1 == e.indexOf("Safari")
        }),
        fontSize: function () {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : window,
                t = e.document,
                n = t.documentElement,
                i = "orientationchange" in e ? "orientationchange" : "resize",
                a = function () {
                    var e = n.clientWidth || 375;
                    750 < e && (e = 750), n.style.fontSize = e / 7.5 + "px"
                };
            window.getComputedStyle(n, null).getPropertyValue("font-size") <= "20px" && a(), t.addEventListener && (e.addEventListener(i, a, !1), t.addEventListener("DOMContentLoaded", a, !1))
        },
        getAjax: function (t, e, a, s) {
            $.ajax({
                type: "GET",
                url: this.site + t,
                data: e,
                dataType: "JSON",
                success: a,
                fail: s
            })
        },
        code: '',
        showNav: function () {
            $(".common-header ol").toggle(), $("body").toggleClass("header-active")
        },
        postAjax: function (t, e, a, s) {
            $.ajax({
                type: "POST",
                url: this.site + t,
                data: e,
                dataType: "json",
                success: a,
                fail: s
            })
        },
        setSeo: function () {
            this.getAjax("/seo", {}, function (t) {
                console.log(t), 200 == t.status ? ($("title").text(t.data.title), $("meta[name='keywords']").attr("content", t.data.keywords), $("meta[name='description']").attr("content", t.data.description)) : alert(t.message)
            })
        },
        check() {
            var that = this;
            var order = $('.out_trade_no').text();
            var timer = setInterval(function () {
                if (!that.code) {
                    console.log(111);
                    that.getAjax('/wxCallback', {
                        out_trade_no: order
                    }, function (res) {
                        console.log(res);
                        that.code = res.code;
                        if (res.code == 1) {
                            clearInterval(timer);
                            that.code = res.code;
                            window.location.href = ' https://www.doubaner.top/accompany/wxsuccess/?id=' + order;
                        }
                    });
                }
            }, 1000);
        },
        getQueryString: function (t) {
            var e = new RegExp("(^|&)" + t + "=([^&]*)(&|$)", "i"),
                n = window.location.search.substr(1).match(e),
                s = "";
            return null != n && (s = n[2]), (n = e = null) == s || "" == s || "undefined" == s ? "" : s
        },
        init: function () {
            var that = this;
            that.fontSize();
            that.setSeo();
            
            var img = that.getQueryString('img');
            // $('#qrcode').attr('src', img);
            $(".common-header ul").on("click", function () {
                that.showNav();
            });
            setTimeout(function () {
                that.check();
            }, 3000);
            var money = that.getQueryString('money');
            var time = that.getQueryString('time');
            $(".total").text(money);
            $(".time").text(time);
        }
    }).init()
});
//# sourceMappingURL=alisuccess.js.map