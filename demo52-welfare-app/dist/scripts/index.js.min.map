{"version":3,"sources":["index.js"],"names":["$","jQuery","support","cors","language","browserLanguage","window","Base","site","navigator","toLowerCase","slides","versions","appVersion","e","wechat","t","match","weibo","indexOf","qq","trident","presto","webKit","gecko","mobile","ios","android","webApp","arguments","length","document","i","documentElement","n","fontSize","style","getPropertyValue","o","addEventListener","setSwiper","Swiper","use","getComputedStyle","params","autoplay","loop","slidesPerView","lazy","getBannerInfos","this","getAjax","res","console","log","status","text","data","alert","message","welfareDatas","children","aims","countUp","num","total","sumofcinemas","newsList8","column","that","StrategyList","swiperSlides","ele","index","str_thumb","datas","str_id","imgSite","str_title","html","newsList9","changeUrl","location","companyList","forEach","logo","fns","fnf","link_url","fail","type","success","url","setSeo","dataType","showNav","title","attr","setTimeout","toggle","init","on"],"mappings":"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","file":"index.js","sourcesContent":["$(function () {\r\n  jQuery.support.cors = true;\r\n  let Base = window.Base || {};\r\n  Base = {\r\n    site: 'https://www.doubaner.top',\r\n    slides: null,\r\n    language: (navigator.browserLanguage || navigator.language).toLowerCase(),\r\n    versions: function () {\r\n      var e = navigator.userAgent, t = e.toLowerCase();\r\n      navigator.appVersion;\r\n      return {\r\n        wechat: \"micromessenger\" == t.match(/MicroMessenger/i),\r\n        qq: \"qq\" == t.match(/QQ/i),\r\n        weibo: \"weibo\" == t.match(/WeiBo/i),\r\n        trident: e.indexOf(\"Trident\") > -1,\r\n        presto: e.indexOf(\"Presto\") > -1,\r\n        webKit: e.indexOf(\"AppleWebKit\") > -1,\r\n        gecko: e.indexOf(\"Gecko\") > -1 && -1 == e.indexOf(\"KHTML\"),\r\n        mobile: !!e.match(/AppleWebKit.*Mobile.*/),\r\n        ios: !!e.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),\r\n        android: e.indexOf(\"Android\") > -1 || e.indexOf(\"Linux\") > -1,\r\n        iPhone: e.indexOf(\"iPhone\") > -1,\r\n        iPad: e.indexOf(\"iPad\") > -1,\r\n        webApp: -1 == e.indexOf(\"Safari\")\r\n      }\r\n    }(),\r\n    fontSize: function () {\r\n      var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window, t = e.document,\r\n        i = t.documentElement, n = \"orientationchange\" in e ? \"orientationchange\" : \"resize\",\r\n        o = function () {\r\n          var e = i.clientWidth || 375;\r\n          e > 750 && (e = 750), i.style.fontSize = e / 7.5 + \"px\"\r\n        };\r\n      window.getComputedStyle(i, null).getPropertyValue(\"font-size\") <= \"20px\" && o(), t.addEventListener && (e.addEventListener(n, o, !1), t.addEventListener(\"DOMContentLoaded\", o, !1))\r\n    },\r\n    setSwiper() {\r\n      let that = this;\r\n      let myPlugin = {\r\n        name: 'debugger',\r\n        params: {\r\n          debugger: false,\r\n        },\r\n        // on: {\r\n        //     init: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('init');\r\n        //     },\r\n        //     click: function (e) {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('click');\r\n        //     },\r\n        //     tap: function (e) {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('tap');\r\n        //     },\r\n        //     doubleTap: function (e) {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('doubleTap');\r\n        //     },\r\n        //     sliderMove: function (e) {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('sliderMove');\r\n        //     },\r\n        //     slideChange: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('slideChange', this.previousIndex, '->', this.activeIndex);\r\n        //     },\r\n        //     slideChangeTransitionStart: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('slideChangeTransitionStart');\r\n        //     },\r\n        //     slideChangeTransitionEnd: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('slideChangeTransitionEnd');\r\n        //     },\r\n        //     transitionStart: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('transitionStart');\r\n        //     },\r\n        //     transitionEnd: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('transitionEnd');\r\n        //     },\r\n        //     fromEdge: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('fromEdge');\r\n        //     },\r\n        //     reachBeginning: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('reachBeginning');\r\n        //     },\r\n        //     reachEnd: function () {\r\n        //         if (!this.params.debugger) return;\r\n        //         // console.log('reachEnd');\r\n        //     },\r\n        // }\r\n        // on: {\r\n        //     progress: function (progress) {\r\n        //         for (let i = 0; i < that.slides.length; i++) {\r\n        //             slide = that.slides.eq(i);\r\n        //             slideProgress = that.slides[i].progress;\r\n        //             if (i == 4) {\r\n        //                 prevIndent = 0.3228;\r\n        //             } else {\r\n        //                 prevIndent = 0.0898;\r\n        //             }\r\n        //\r\n        //             if (Math.abs(slideProgress + prevIndent) < 1) {\r\n        //                 scale = (1 - Math.abs(slideProgress + prevIndent)) * 0.1 + 1\r\n        //             } else {\r\n        //                 scale = 1;\r\n        //             }\r\n        //\r\n        //             slide.find('a').transform('scale3d(' + scale + ',' + scale + ',1)');\r\n        //         }\r\n        //     },\r\n        //     setTransition: function (transition) {\r\n        //         for (var i = 0; i < that.slides.length; i++) {\r\n        //             var slide = that.slides.eq(i);\r\n        //             slide.find('a').transition(transition);\r\n        //         }\r\n        //\r\n        //     },\r\n        //\r\n        //     //处理左侧拖入时背景图消失\r\n        //     touchMove: function () {\r\n        //         if (this.progress < 0.01) {\r\n        //             this.controller.control = '';\r\n        //         } else {\r\n        //             this.controller.control = swiperBg;\r\n        //         }\r\n        //     },\r\n        //     touchEnd: function () {\r\n        //         if (this.translate < -1515) {\r\n        //             alert('跳转');\r\n        //         }\r\n        //     }\r\n        // }\r\n      };\r\n      // Install Plugin To Swiper\r\n      Swiper.use(myPlugin);\r\n      // Init Swiper\r\n      let swiper = new Swiper('#action-list', {\r\n        autoplay: false,\r\n        loop: true,\r\n        lazy: true,\r\n        slidesPerView: 'auto',\r\n        // slidesOffsetBefore: 38,\r\n        // slidesOffsetAfter: 40,\r\n        pagination: {\r\n          el: '.swiper-pagination',\r\n          clickable: true,\r\n        },\r\n        // Enable debugger\r\n        // debugger: true,\r\n      });\r\n    },\r\n    getBannerInfos() {\r\n      this.getAjax('/intro', {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          $(\".banner>.activity-des>p\").text(res.data);\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      });\r\n    },\r\n    welfareDatas() {\r\n      this.getAjax('/data', {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          $(\"#donate ul li:eq(0)\").children('h3').text(res.data.aims).countUp();\r\n          $(\"#donate ul li:eq(1)\").children('h3').text(res.data.num).countUp();\r\n          $(\"#donate ul li:eq(2)\").children('h3').text(res.data.total).countUp();\r\n          $(\"#donate ul li:eq(3)\").children('h3').text(res.data.sumofcinemas).countUp();\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      });\r\n    },\r\n    newsList8() {\r\n      let that = this;\r\n      this.getAjax('/newsList/column/8', {\r\n        column: 8\r\n      }, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          let datas = res.data.StrategyList;\r\n          if (datas.length > 0) {\r\n            let swiperSlides = '';\r\n            datas.forEach((ele, index) => {\r\n              let imgSite = that.site + ele.str_thumb;\r\n              if (index < 4) {\r\n                swiperSlides += `\r\n                            <li>\r\n                                <a href=\"./news.html?id=${ele.str_id}\" data-id=\"${ele.str_id}\">\r\n                                    <div>\r\n                                        <img src=\"${imgSite}\" alt=\"${ele.str_title}\">\r\n                                    </div>\r\n                                    <p>${ele.str_title}</p>\r\n                                </a>\r\n                            </li>\r\n                            `;\r\n              }\r\n            });\r\n            // console.log(swiperSlides);\r\n            $(\"#star>ul\").html(swiperSlides);\r\n          } else {\r\n            $(\"#star>ul\").html('<h3>这里还什么都没有</h3>');\r\n          }\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      });\r\n    },\r\n    newsList9() {\r\n      let that = this;\r\n      that.getAjax('/newsList/column/9', {\r\n        column: 9\r\n      }, function (res) {\r\n        // console.log('9');\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          let datas = res.data.StrategyList;\r\n          if (datas.length > 0) {\r\n            let swiperSlides = '';\r\n            datas.forEach((ele) => {\r\n              let imgSite = that.site + ele.str_thumb;\r\n\r\n              swiperSlides += `\r\n                            <a href=\"./news.html?id=${ele.str_id}\" class=\"swiper-slide\" data-id=\"${ele.str_id}\">\r\n                               <div>\r\n                                    <img src=\"${imgSite}\" alt=\"${ele.str_title}\">\r\n                               </div>\r\n                               <p>${ele.str_title}</p>\r\n                            </a>`;\r\n              that.slides = swiperSlides;\r\n            });\r\n            $(\"#action-list>.swiper-wrapper\").html(swiperSlides);\r\n            //3d\r\n          } else {\r\n            $(\"#action-list>.swiper-wrapper\").html('<h3>这里还什么都没有</h3>');\r\n          }\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      });\r\n    },\r\n    changeUrl() {\r\n      let that = this;\r\n      console.log(that.versions);\r\n      if (that.versions.mobile) {\r\n        //手机端\r\n        // window.location.href = \"https://www.baidu.com\";\r\n      } else {\r\n        // pc端\r\n        window.location.href = \"https://www.doubaner.top/accompany/index\";\r\n      }\r\n    },\r\n    companyList() {\r\n      let that = this;\r\n      that.getAjax('/companyList', {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          let datas = res.data;\r\n          if (datas.length > 0) {\r\n            let swiperSlides = '';\r\n            datas.forEach((ele, index) => {\r\n              let imgSite = that.site + ele.logo;\r\n              if (index < 9) {\r\n                swiperSlides += `\r\n                            <li>\r\n                                <a href=\"${ele.link_url}\" class=\"swiper-slide\" target=\"_blank\">\r\n                                    <img src=\"${imgSite}\" alt=\"${ele.link_url}\">\r\n                                </a>\r\n                            </li>\r\n                            `;\r\n              }\r\n            });\r\n            $(\"#company>ul\").html(swiperSlides);\r\n          } else {\r\n            $(\"#company>ul\").html('<h3>这里还什么都没有</h3>');\r\n          }\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      });\r\n    },\r\n    getAjax(url, datas, fns, fnf) {\r\n      $.ajax({\r\n        type: \"GET\",\r\n        url: this.site + url,\r\n        data: datas,\r\n        dataType: 'JSON',\r\n        success: fns,\r\n        fail: fnf\r\n      });\r\n    },\r\n    postAjax(url, datas, fns, fnf) {\r\n      $.ajax({\r\n        type: \"POST\",\r\n        url: this.site + url,\r\n        data: datas,\r\n        dataType: 'json',\r\n        success: fns,\r\n        fail: fnf\r\n      });\r\n    },\r\n    setSeo() {\r\n      let that = this;\r\n      that.getAjax('/seo', {}, function (res) {\r\n        console.log(res);\r\n        if (res.status == 200) {\r\n          $(\"title\").text(res.data.title);\r\n          $(\"meta[name='keywords']\").attr('content', res.data['keywords']);\r\n          $(\"meta[name='description']\").attr('content', res.data['description']);\r\n        } else {\r\n          alert(res.message);\r\n        }\r\n      })\r\n\r\n    },\r\n    showNav() {\r\n\r\n      $(\".common-header ol\").toggle();\r\n      $(\"body\").toggleClass('header-active');\r\n    },\r\n    init() {\r\n      console.log('111');\r\n      let that = this;\r\n      that.changeUrl();\r\n      that.fontSize();\r\n      that.setSeo();\r\n      $(\".common-header ul\").on('click', function () {\r\n        that.showNav();\r\n      });\r\n      that.getBannerInfos();\r\n      that.welfareDatas();\r\n      that.newsList8();\r\n      that.newsList9();\r\n      that.companyList();\r\n      setTimeout(() => {\r\n        that.setSwiper();\r\n      }, 2000);\r\n    }\r\n  };\r\n  Base.init();\r\n});"]}