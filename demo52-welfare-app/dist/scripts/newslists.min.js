"use strict";$(function(){jQuery.support.cors=!0;var t,e;window.Base;({site:"https://www.doubaner.top",language:(navigator.browserLanguage||navigator.language).toLowerCase(),versions:(t=navigator.userAgent,e=t.toLowerCase(),navigator.appVersion,{wechat:"micromessenger"==e.match(/MicroMessenger/i),qq:"qq"==e.match(/QQ/i),weibo:"weibo"==e.match(/WeiBo/i),trident:-1<t.indexOf("Trident"),presto:-1<t.indexOf("Presto"),webKit:-1<t.indexOf("AppleWebKit"),gecko:-1<t.indexOf("Gecko")&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<t.indexOf("Android")||-1<t.indexOf("Linux"),iPhone:-1<t.indexOf("iPhone"),iPad:-1<t.indexOf("iPad"),webApp:-1==t.indexOf("Safari")}),fontSize:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,e=t.document,n=e.documentElement,a="orientationchange"in t?"orientationchange":"resize",i=function(){var t=n.clientWidth||375;750<t&&(t=750),n.style.fontSize=t/7.5+"px"};window.getComputedStyle(n,null).getPropertyValue("font-size")<="20px"&&i(),e.addEventListener&&(t.addEventListener(a,i,!1),e.addEventListener("DOMContentLoaded",i,!1))},setSeo:function(){this.getAjax("/seo",{},function(t){console.log(t),200==t.status?($("title").text(t.data.title),$("meta[name='keywords']").attr("content",t.data.keywords),$("meta[name='description']").attr("content",t.data.description)):alert(t.message)})},showNav:function(){$(".common-header ol").toggle(),$("body").toggleClass("header-active")},pagesLength:1,page:1,getInfos:function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,c=this,t=c.getQueryString("type"),e="/news/page/"+d+"/column/"+t;c.getAjax(e,{},function(t){if(console.log(t),200==t.status){var e=t.data.newsList,n=t.data.rightNewsList,a=t.data.Configs,i="",s="",o=t.data.count,r="";if(e){e.forEach(function(t){i+='<li>\n                                    <a href="./news.html?id='+t.str_id+'">\n                                        <div class="img-infos">\n                                            <img src="'+(c.site+t.str_thumb)+'" alt="">\n                                            <span>'+t.news_time+'</span>\n                                        </div>\n                                        <div class="des-infos">\n                                            <h3>'+t.str_title+"</h3>\n                                            <p>"+t.str_guide+"</p>\n                                        </div>\n                                    </a>\n                                </li>"}),c.pagesLength=Math.ceil(o/8);for(var l=1;l<=c.pagesLength;l++)console.log(l),r+=l==d?'<li class="active" data-page="'+l+'">'+l+"</li>":'<li data-page="'+l+'">'+l+"</li>";$("#show-pages").html(r),$("#news-list-big>ul").append(i)}else $("#news-list-big>ul").append("<h1>Sorry,这里还什么都没有</h1>");a&&a.forEach(function(t){var e='meta[name="'+t.name+'"]';"title"==t.name?$("title").text(t.value):$(e)[0]?$(e).attr("content",t.value):$("head").append('<meta name="'+t.name+'" content="'+t.value+'" />')}),n?(n.forEach(function(t){s+='<li>\n                                    <a href="./news.html?id='+t.str_id+'">\n                                        <div class="img-infos">\n                                            <img src="'+(c.site+t.str_thumb)+'" alt="">\n                                        </div>\n                                        <div class="des-infos">\n                                            <h3>'+t.str_title+"</h3>\n                                            <p>"+t.news_time+'</p>\n                                        </div>\n                                        <img src="" alt="" class="icon">\n                                    </a>\n                                </li>'}),$("#news-list-small>ul").append(s)):$("#news-list-small>ul").append("<h1>Sorry,这里还什么都没有</h1>"),c.pagesLength=Math.ceil(o/8)}else alert(t.message)})},addInfos:function(){},setCrumb:function(){var t=this.getQueryString("type"),e=$("#news-list-big h2 span"),n=$("#news-list-small h2 span");9==t?(e.text("公益行动").next().attr("href","javascript:;"),n.text("公益明星").next().attr("href","/newsList.html?type=8")):8==t&&(e.text("公益明星").next().attr("href","/javascript:;"),n.text("公益行动").next().attr("href","/newsList.html?type=9"))},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e),a="";return null!=n&&(a=n[2]),(n=e=null)==a||""==a||"undefined"==a?"":a},getAjax:function(t,e,n,a){$.ajax({type:"GET",url:this.site+t,data:e,dataType:"JSON",success:n,fail:a})},postAjax:function(t,e,n,a){$.ajax({type:"POST",url:this.site+t,data:e,dataType:"json",success:n,fail:a})},init:function(){var e=this;e.getInfos(),e.setCrumb(),e.fontSize(),e.setSeo(),$(".common-header ul").on("click",function(){e.showNav()}),$("#show-pages").on("click","li",function(){if(!$(this).hasClass("active")){var t=$(this).attr("data-page");e.getInfos(t)}})}}).init()});
//# sourceMappingURL=newslists.js.map
