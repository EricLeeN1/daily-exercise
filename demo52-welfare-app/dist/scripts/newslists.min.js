"use strict";$(function(){jQuery.support.cors=!0;var e,t;window.Base;({site:"https://www.doubaner.top",language:(navigator.browserLanguage||navigator.language).toLowerCase(),versions:(e=navigator.userAgent,t=e.toLowerCase(),navigator.appVersion,{wechat:"micromessenger"==t.match(/MicroMessenger/i),qq:"qq"==t.match(/QQ/i),weibo:"weibo"==t.match(/WeiBo/i),trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad"),webApp:-1==e.indexOf("Safari")}),fontSize:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=e.document,n=t.documentElement,i="orientationchange"in e?"orientationchange":"resize",a=function(){var e=n.clientWidth||375;750<e&&(e=750),n.style.fontSize=e/7.5+"px"};window.getComputedStyle(n,null).getPropertyValue("font-size")<="20px"&&a(),t.addEventListener&&(e.addEventListener(i,a,!1),t.addEventListener("DOMContentLoaded",a,!1))},setSeo:function(){this.getAjax("/seo",{},function(e){console.log(e),200==e.status?($("title").text(e.data.title),$("meta[name='keywords']").attr("content",e.data.keywords),$("meta[name='description']").attr("content",e.data.description)):alert(e.message)})},showNav:function(){$(".common-header ol").toggle(),$("body").toggleClass("header-active")},pagesLength:1,page:1,getInfos:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,r=this,t="/news/page/"+e+"/column/"+r.getQueryString("type");r.getAjax(t,{},function(e){if(console.log(e),200==e.status){var t=e.data.newsList,n=e.data.rightNewsList,i=e.data.Configs,a="",s="",o=e.data.count;t?(t.forEach(function(e){a+='<li>\n                                    <a href="./news.html?id='+e.str_id+'">\n                                        <div class="img-infos">\n                                            <img src="'+(r.site+e.str_thumb)+'" alt="">\n                                            <span>'+e.news_time+'</span>\n                                        </div>\n                                        <div class="des-infos">\n                                            <h3>'+e.str_title+"</h3>\n                                            <p>"+e.str_guide+"</p>\n                                        </div>\n                                    </a>\n                                </li>"}),$("#news-list-big>ul").append(a)):$("#news-list-big>ul").append("<h1>Sorry,这里还什么都没有</h1>"),i&&i.forEach(function(e){var t='meta[name="'+e.name+'"]';"title"==e.name?$("title").text(e.value):$(t)[0]?$(t).attr("content",e.value):$("head").append('<meta name="'+e.name+'" content="'+e.value+'" />')}),n?(n.forEach(function(e){s+='<li>\n                                    <a href="./news.html?id='+e.str_id+'">\n                                        <div class="img-infos">\n                                            <img src="'+(r.site+e.str_thumb)+'" alt="">\n                                        </div>\n                                        <div class="des-infos">\n                                            <h3>'+e.str_title+"</h3>\n                                            <p>"+e.news_time+'</p>\n                                        </div>\n                                        <img src="" alt="" class="icon">\n                                    </a>\n                                </li>'}),$("#news-list-small>ul").append(s)):$("#news-list-small>ul").append("<h1>Sorry,这里还什么都没有</h1>"),r.pagesLength=Math.ceil(o/8)}else alert(e.message)})},addInfos:function(){},setCrumb:function(){var e=this.getQueryString("type"),t=$("#news-list-small h2 span");9==e?t.text("公益明星").next().attr("href","/newsList.html?type=8"):8==e&&t.text("公益行动").next().attr("href","/newsList.html?type=9")},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t),i="";return null!=n&&(i=n[2]),(n=t=null)==i||""==i||"undefined"==i?"":i},getAjax:function(e,t,n,i){$.ajax({type:"GET",url:this.site+e,data:t,dataType:"JSON",success:n,fail:i})},postAjax:function(e,t,n,i){$.ajax({type:"POST",url:this.site+e,data:t,dataType:"json",success:n,fail:i})},init:function(){var t=this;t.getInfos(),t.setCrumb(),t.fontSize(),t.setSeo(),$(".common-header ul").on("click",function(){t.showNav()}),$("#show-pages").on("click","li",function(){if(!$(this).hasClass("active")){var e=$(this).attr("data-page");t.getInfos(e)}})}}).init()});
//# sourceMappingURL=newslists.js.map
