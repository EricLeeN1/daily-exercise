"use strict";$(function(){jQuery.support.cors=!0;var e,t;window.Base;({site:"https://www.doubaner.top",check:!1,payValue:197,modalShow:!1,language:(navigator.browserLanguage||navigator.language).toLowerCase(),versions:(e=navigator.userAgent,t=e.toLowerCase(),navigator.appVersion,{wechat:"micromessenger"==t.match(/MicroMessenger/i),qq:"qq"==t.match(/QQ/i),weibo:"weibo"==t.match(/WeiBo/i),trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad"),webApp:-1==e.indexOf("Safari")}),fontSize:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=e.document,a=t.documentElement,n="orientationchange"in e?"orientationchange":"resize",i=function(){var e=a.clientWidth||375;750<e&&(e=750),a.style.fontSize=e/7.5+"px"};window.getComputedStyle(a,null).getPropertyValue("font-size")<="20px"&&i(),t.addEventListener&&(e.addEventListener(n,i,!1),t.addEventListener("DOMContentLoaded",i,!1))},showNav:function(){$(".common-header ol").toggle(),$("body").toggleClass("header-active")},checkForms:function(e){var t=this,a={},n=/^1[3-8]\d{9}$/,i=/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g,o=$("#receipt").val();return a.username=$("#username").val(),a.sex=$("#appellation").val(),a.phone=$("#phone").val(),a.email=$("#email").val(),a.total_fee=$("input[name=total_fee]").val(),a.invoicing=o?$("#select-choice").val():0,a.invoice=$("#organ-name").val(),a.TaxID=$("#taxid").val(),a.address=$("#address").val(),1==e?a.username?($("#username").next("span").text(""),n.test(a.phone)?($("#phone").next("span").text(""),i.test(a.email)?($("#email").next("span").text(""),a.address?($("#address").next("span").text(""),o&&!a.invoice?void $("#organ-name").next("span").text("请输入发票抬头"):($("#organ-name").next("span").text(""),o&&!a.TaxID?void $("#taxid").next("span").text("请输入税号"):($("#taxid").next("span").text(""),t.check=!0,a))):void $("#address").next("span").text("邮寄地址不能为空")):void $("#email").next("span").text("电子邮箱格式不对")):void $("#phone").next("span").text("手机号码格式不对")):void $("#username").next("span").text("您还没有填写名字呢"):2==e?a.username?($("#username").next("span").text(""),n.test(a.phone)?($("#phone").next("span").text(""),i.test(a.email)?($("#email").next("span").text(""),a.address?($("#address").next("span").text(""),t.check=!0,a):void $("#address").next("span").text("邮寄地址不能为空")):void $("#email").next("span").text("电子邮箱格式不对")):void $("#phone").next("span").text("手机号码格式不对")):void $("#username").next("span").text("您还没有填写名字呢"):a.username?($("#username").next("span").text(""),t.check=!0,a):void $("#username").next("span").text("您还没有填写名字呢")},paySet:function(){var e=this;if(e.versions.wechat){console.log(e.versions.wechat);$("#pay-methods").html('\n                <div class="radio-group">\n                    <input hidden type="radio" name="way" value="2" data-type="2" alt="微信" checked>\n                </div>\n                <div class="img-group">\n                    <img src="./images/donate/wechat-pay@2x.png" data-type="2" class="active" alt="">\n                </div>')}else if(e.versions.webKit&&e.versions.mobile){$("#pay-methods").html('\n                <div class="radio-group">\n                    <input hidden type="radio" name="way" value="1" data-type="1" alt="支付宝" checked>\n                </div>\n                <div class="img-group">\n                    <img src="./images/donate/ali-pay@2x.png" alt="" data-type="1"  class="active">\n                </div>')}},payOrder:function(e){var t=this,a=null,n=t.payValue,i=e.attr("data-type"),o=$("#form-group input[name=receipt]").val();a=100<n?o?t.checkForms(1):t.checkForms(2):t.checkForms(0),t.check&&(a.way=i,console.log(a),$("#pay-form").submit())},blurCheck:function(e){console.log(111);var t=this,a=e.val(),n=e.attr("data-check"),i=$("input[name=receipt]:checked").val();switch(n){case"name":a?$("#username").next("span").text(""):$("#username").next("span").text("您还没有填写名字呢");break;case"pay":a<100?(t.toggleForms(!1),$("#pay-input").val(a)):($("#pay-input").val(a),t.toggleForms(!0)),t.payValue=a;break;case"phone":/^1[3-8]\d{9}$/.test(a)?$("#phone").next("span").text(""):$("#phone").next("span").text("手机号码格式不对");break;case"email":/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g.test(a)?$("#email").next("span").text(""):$("#email").next("span").text("电子邮箱格式不对");break;case"address":a?$("#address").next("span").text(""):$("#address").next("span").text("邮寄地址不能为空");break;case"organ-name":i&&!a?$("#organ-name").next("span").text("请输入发票抬头1"):$("#organ-name").next("span").text("");break;case"taxid":i&&!a?$("#taxid").next("span").text("请输入税号"):$("#taxid").next("span").text("")}},changePayValue:function(e){var t=this,a=e.attr("data-value");e.addClass("active").siblings().removeClass("active"),a&&(t.payValue=a,e.children("input[name=total_fee]").attr("checked",!0),e.siblings().children("input[name=total_fee]").attr("checked",!1)),t.payValue=a,e.children("input[name=total_fee]").attr("checked",!0),e.siblings().children("input[name=total_fee]").attr("checked",!1),$("#total_fee").val(""),t.toggleForms(!0)},changePayType:function(e){var t=e.attr("data-type"),a=e.index();console.log(a),e.addClass("active").siblings().removeClass("active"),1==t?$("#pay-methods>.radio-group>input:eq(0)").attr("checked",!0).siblings().attr("checked",!1):2==t&&$("#pay-methods>.radio-group>input:eq(1)").attr("checked",!0).siblings().attr("checked",!1)},getCheck:function(e){e.val()?$("#form-group .receipt-choice").show():$("#form-group .receipt-choice").hide()},toggleForms:function(e){e?($("#form-group input[data-check]:not([data-check='name']),.receipt-radio").parent().show(),$("#appellation").parent().show()):($("#form-group input[data-check]:not([data-check='name']),.receipt-radio").parent().hide(),$("#appellation").parent().hide())},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t),n="";return null!=a&&(n=a[2]),(a=t=null)==n||""==n||"undefined"==n?"":n},getAjax:function(e,t,a,n){$.ajax({type:"GET",url:this.site+e,data:t,dataType:"JSON",success:a,fail:n})},postAjax:function(e,t,a,n){$.ajax({type:"POST",url:this.site+e,data:t,dataType:"json",success:a,fail:n})},setSeo:function(){this.getAjax("/seo",{},function(e){console.log(e),200==e.status?($("title").text(e.data.title),$("meta[name='keywords']").attr("content",e.data.keywords),$("meta[name='description']").attr("content",e.data.description)):alert(e.message)})},init:function(){var t=this;t.fontSize(),t.setSeo(),t.paySet(),$(".common-header ul").on("click",function(){t.showNav()}),$("#pay-now").on("click",function(){var e=$(this);t.payOrder(e)}),$("#pay-methods-list>li").on("click",function(){var e=$(this);t.changePayValue(e)}),$("#pay-methods>.img-group>img").on("click",function(){var e=$(this);t.changePayType(e)}),$("#form-group input[data-check],#total_fee").on("blur",function(){var e=$(this);t.blurCheck(e)}),$("#form-group input[name=receipt]").on("change",function(){var e=$(this);t.getCheck(e)}),$("body,#qrcode-modal span").on("click",function(){t.modalShow&&t.modalHide()})}}).init()});
//# sourceMappingURL=donate.js.map
