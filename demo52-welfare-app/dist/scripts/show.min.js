"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$(function(){var e;jQuery.support.cors=!0;var t,n;window.Base;_defineProperty(e={site:"https://www.doubaner.top",language:(navigator.browserLanguage||navigator.language).toLowerCase(),versions:(t=navigator.userAgent,n=t.toLowerCase(),navigator.appVersion,{wechat:"micromessenger"==n.match(/MicroMessenger/i),qq:"qq"==n.match(/QQ/i),weibo:"weibo"==n.match(/WeiBo/i),trident:-1<t.indexOf("Trident"),presto:-1<t.indexOf("Presto"),webKit:-1<t.indexOf("AppleWebKit"),gecko:-1<t.indexOf("Gecko")&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<t.indexOf("Android")||-1<t.indexOf("Linux"),iPhone:-1<t.indexOf("iPhone"),iPad:-1<t.indexOf("iPad"),webApp:-1==t.indexOf("Safari")}),fontSize:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=e.document,n=t.documentElement,i="orientationchange"in e?"orientationchange":"resize",a=function(){var e=n.clientWidth||375;750<e&&(e=750),n.style.fontSize=e/7.5+"px"};window.getComputedStyle(n,null).getPropertyValue("font-size")<="20px"&&a(),t.addEventListener&&(e.addEventListener(i,a,!1),t.addEventListener("DOMContentLoaded",a,!1))},setSeo:function(){this.getAjax("/seo",{},function(e){console.log(e),200==e.status?($("title").text(e.data.title),$("meta[name='keywords']").attr("content",e.data.keywords),$("meta[name='description']").attr("content",e.data.description)):alert(e.message)})},showNav:function(){$(".common-header ol").toggle(),$("body").toggleClass("header-active")},pagesLength:1,page:1,showList:function(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,r=this,e="/publicity/"+s;r.getAjax(e,{},function(e){if(console.log(e),200==e.status){var t=e.data.list,n=e.data.count,i="";if(0<t.length){var a="";t.forEach(function(e){a+='\n  <li>\n    <a href="'+(r.site+e.file)+'" download="'+(r.site+e.file)+'">\n        <h3>'+e.title+"</h3>\n            <span>"+e.time+"</span>\n    </a>\n  </li>\n  "}),$("#show-list").html(a)}else $("#show-list").html("<h3>这里还什么都没有</h3>");r.pagesLength=Math.ceil(n/8);for(var o=1;o<=r.pagesLength;o++)console.log(o),i+=o==s?'<li class="active" data-page="'+o+'">'+o+"</li>":'<li data-page="'+o+'">'+o+"</li>";$("#show-pages").html(i)}else alert(e.message)})},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t),i="";return null!=n&&(i=n[2]),(n=t=null)==i||""==i||"undefined"==i?"":i},imgLoad:function(){var e=new Image;e.onload=function(){console.log("success")},e.onerror=function(){this.src=that.site+ +this.src}},getAjax:function(e,t,n,i){$.ajax({type:"GET",url:this.site+e,data:t,dataType:"JSON",success:n,fail:i})},postAjax:function(e,t,n,i){$.ajax({type:"POST",url:this.site+e,data:t,dataType:"json",success:n,fail:i})}},"setSeo",function(){this.getAjax("/seo",{},function(e){console.log(e),200==e.status?($("title").text(e.data.title),$("meta[name='keywords']").attr("content",e.data.keywords),$("meta[name='description']").attr("content",e.data.description)):alert(e.message)})}),_defineProperty(e,"init",function(){var t=this;t.showList(),t.fontSize(),t.setSeo(),$(".common-header ul").on("click",function(){t.showNav()}),$("#show-pages").on("click","li",function(){if(!$(this).hasClass("active")){var e=$(this).attr("data-page");t.showList(e)}})}),e.init()});
//# sourceMappingURL=show.js.map
