{"version":3,"sources":["donate.js"],"names":["$","jQuery","support","cors","language","browserLanguage","window","Base","site","check","payValue","navigator","toLowerCase","modalShow","e","versions","appVersion","t","match","weibo","wechat","indexOf","qq","trident","presto","webKit","gecko","mobile","ios","android","webApp","arguments","length","document","i","documentElement","n","fontSize","style","getPropertyValue","o","addEventListener","showNav","toggle","toggleClass","checkForms","type","that","this","params","regPhone","regEmail","val","email","invoicing","username","sex","phone","invoice","next","text","test","address","TaxID","payOrder","radioValue","console","log","submit","blurCheck","checkType","attr","optionCheck","value","toggleForms","changePayValue","ele","addClass","siblings","removeClass","children","changePayType","index","show","hide","args","parent","getQueryString","name","RegExp","location","reg","context","r","getAjax","fnf","ajax","datas","dataType","success","fail","fns","url","data","res","message","alert","on","_this","getCheck","modalHide"],"mappings":"aAAAA,EAAE,WACEC,OAAOC,QAAQC,MAAO,EADxB,IAQMC,EAAqBC,EARfC,OAAAC,MACHL,CACHK,KAAAA,2BACJA,OAAO,EACHC,SAAM,IACNC,WAAO,EACPC,UAAUC,UAHPN,iBAAAM,UAAAP,UAAAQ,cAIHC,UACAT,EAAWO,UAAUN,UAAAA,EAAVS,EAAAF,cACXG,UAAUC,WACFF,CAAyBG,OAAML,kBAAnCK,EAAAC,MAAA,mBACAP,GAAAA,MAAUK,EAAAA,MAAV,OACAG,MAAO,SAAAF,EAAAC,MAAA,UACHE,SAA8BF,EAAtBJ,EAAAO,QAAA,WACRC,QAFG,EAECR,EAAAO,QAAUH,UACdC,QAHG,EAGIL,EAAAO,QAAWJ,eAClBM,OAAS,EAATA,EAAST,QAAEO,WAJR,GAAAP,EAAAO,QAAA,SAKHG,SAAUH,EAAAA,MAAQ,yBAClBI,MAAAA,EAAQX,MAAEO,iCACVK,SAAO,EAAEL,EAAAA,QAAQ,aAPd,EAO+BP,EAAMA,QAAEO,SAC1CM,QAAkB,EAAVb,EAAEA,QAAQ,UAClBc,MAAe,EAATd,EAACA,QAAQ,QACfe,QAASf,GAAEO,EAAAA,QAAQ,YAGnBS,SAAAA,WAbG,IAAPhB,EAAA,EAAAiB,UAAAC,aAAA,IAAAD,UAAA,GAAAA,UAAA,GAAAzB,OAAAW,EAAAH,EAAAmB,SATDC,EAAAjB,EAAAkB,gBAAAC,EAAA,sBAAAtB,EAAA,oBAAA,SAyBHuB,EAAU,WACEN,IAAAA,EAAAA,EAAUC,aAAc,IAAuDC,IAAFnB,IAArFA,EAAA,KAAAoB,EAAAI,MAAAD,SAAAvB,EAAA,IAAA,MAAAR,OAC2B8B,iBAAIF,EAAA,MAAAK,iBAA2B,cAD1D,QAAAC,IAAAvB,EAAAwB,mBAAA3B,EAAA2B,iBAAAL,EAAAI,GAAA,GAAAvB,EAAAwB,iBAAA,mBAAAD,GAAA,KAGQE,QA/BTxC,WAgCSY,EAAAA,qBAAA6B,SACH3C,EALL,QAAA4C,YAAA,kBAOHC,WAnCE3C,SAEA4C,GAkCHJ,IAlCGK,EAAAC,KAmCGC,EAAA,GACAC,EAAQN,gBApCXO,EAAA,8DAuCKJ,EAAJ/C,EAAA,YAAAoD,MAWAH,OAVAA,EAAIA,SAAJjD,EAAA,aAAAoD,MACAH,EAAIC,IAAAA,EAAW,gBAAfE,MACAH,EAAIE,MAAWnD,EAAA,UAAAoD,MACfH,EAAAI,MAAArD,EAAA,UAAAoD,MACAH,EAAIK,UAActD,EAAA,yBAAlBoD,MACAH,EAAOM,UAAWvD,EAAAA,EAAeoD,kBAAjCA,MAAA,EACAH,EAAOO,QAAQxD,EAAA,eAAFoD,MACbH,EAAOQ,MAAQzD,EAAE,UAAUoD,MAC3BH,EAAOI,QAAUrD,EAAA,YAAFoD,MAERE,GAAPL,EACOS,EAAPH,UAIIT,EAAAA,aAAWa,KAAA,QAAAC,KAAA,IACNX,EAAOM,KAAAA,EAAUE,QAIlBzD,EAAE,UAAA2D,KAAaA,QAAKC,KAAQA,IAE3BV,EAASW,KAAKZ,EAAOQ,QAItBzD,EAAE,UAAU2D,KAAK,QAAQC,KAAK,IAE7BT,EAAAA,SAIDnD,EAAE,YAAU2D,KAAK,QAAQC,KAAzB,IAEAN,IAAQQ,EAASJ,aACjB1D,EAAE,eAAY2D,KAAK,QAAQC,KAAK,YAGhC5D,EAAE,eAAY2D,KAAK,QAAQC,KAA3B,IAEAN,IAAcL,EAAOS,WACrB1D,EAAE,UAAA2D,KAAeA,QAAKC,KAAQA,UAG9B5D,EAAE,UAAA2D,KAAeA,QAAKC,KAAQA,IAG9B5D,EAAAA,OAAE,EACFiD,UAnBAjD,EAAE,YAAU2D,KAAK,QAAQC,KAAK,kBAN9B5D,EAAE,UAAU2D,KAAK,QAAQC,KAAK,kBAN9B5D,EAAE,UAAA2D,KAAaA,QAAKC,KAAQA,kBAL7BG,EAAAA,aAAUJ,KAAUP,QAA3BQ,KAAA,aAqCW,GAAAd,EACH9C,EAAEuD,UAINvD,EAAA,aAAA2D,KAAA,QAAAC,KAAA,IACoBV,EAAAW,KAAAZ,EAAAQ,QACpBzD,EAAA,UAGO2D,KAAA,QAAAC,KAAA,IAENT,EAAAU,KAAAZ,EAAAI,QACDrD,EAAA,UAGO2D,KAAA,QAAAC,KAAA,IAENX,EAAAa,SACD9D,EAAA,YAGO2D,KAAA,QAAAC,KAAA,IAENb,EAAAtC,OAAA,EACIwC,QANDjD,EAACmD,YAAAQ,KAAcV,QAAdW,KAA6B,kBAN9B5D,EAACkD,UAASW,KAAKZ,QAAOQ,KAAQ,kBAN9BzD,EAACiD,UAAOM,KAAZ,QAAsBK,KAAA,kBALrB5D,EAAA,aAAA2D,KAAA,QAAAC,KAAA,aAyBGX,EAAAM,UAIJR,EAAKtC,aAALkD,KAAA,QAAAC,KAAA,IAzBGb,EA2BAtC,OAAA,EAAEwC,QARLjD,EAAA,aAGO2D,KAAA,QAAAC,KAAA,cAQHI,SA/HT9D,SA+HSY,GACH,IAAAiC,EAAMC,KACHhD,EAAE,KACLU,EAAAqC,EAAArC,SACDqC,EAAKtC,EAAAA,KAAQ,aACbwD,EAAAjE,EAAA,mCAAAoD,MAlILH,EAmIE,IAAAvC,EAnIFuD,EAAAlB,EAAAF,WAqIS,GAERE,EAAAF,WAAA,GAGIoB,EAAajE,WAAE,GAEf+C,EAAIkB,QACAhB,EAAAA,IAASF,EACZmB,QAAMC,IAAAlB,GAYPjD,EAAA,aAAAoE,WAGAC,UA/JLnE,SA+JKY,GACAoD,QAAAC,IAAA,KACA,IAAApB,EAAAC,KAGAhD,EAAEc,EAAAsC,MACLkB,EAAAxD,EAAAyD,KAAA,cAnKFC,EAAAxE,EAAA,+BAAAoD,MAqKHiB,OArKGC,GAsKCJ,IAAQC,OACGM,EAGC3D,EAAEsC,aAAdO,KAAA,QAAAC,KAAA,IAFIV,EAAAA,aAAWS,KAAf,QAAAC,KAAA,aAIIY,MACJ,IAAQF,MACCG,EAAL,KACQ1B,EAAC0B,aAAO,GACRzE,EAAE,cAAa2D,IAAKc,KAGvBzE,EAAA,cAAAoD,IAAAqB,GACD1B,EAAA2B,aAAA,IALA3B,EAEOrC,SAAA+D,EAMH1B,MACA/C,IAAAA,QAxBR,gBAyBaU,KAAL+D,GAGA1B,EAAAA,UAAK2B,KAAY,QAAjBd,KAAA,IANJ5D,EAAA,UAIO2D,KAAA,QAAAC,KAAA,YAIN,MACD,IAAA,QA9BJ,8DA+BAC,KAAAY,GACIzE,EAAA,UAEO2D,KAAA,QAAAC,KAAA,IAFH5D,EAACkD,UAASW,KAAKY,QAAQb,KAAA,YAI1B,MACD,IAAA,UACCa,EACDzE,EAAA,YAEO2D,KAAA,QAAAC,KAAA,IAFH5D,EAACmD,YAAAQ,KAAcc,QAAQb,KAAA,YAI1B,MACD,IAAA,aACCY,IAALC,EACQzE,EAACyE,eAAOd,KAAA,QAAAC,KAAA,YAAZ5D,EAAA,eAEO2D,KAAA,QAAAC,KAAA,IAEN,MACD,IAAA,QACCY,IAALC,EACQD,EAAAA,UAAAA,KAAgBC,QAAOb,KAAA,SAA3B5D,EAAA,UAEO2D,KAAA,QAAAC,KAAA,MAONe,eAjOVzE,SA+NS0E,GAGI5E,IAAAA,EAAAA,KACHyE,EAAAG,EAAAL,KAAA,cACDK,EAAAC,SAAA,UAAAC,WAAAC,YAAA,UACJN,IACI1B,EAAArC,SAAA+D,EAvDRG,EAAAI,SAAA,yBAAAT,KAAA,WAAA,GA7KDK,EAAAE,WAAAE,SAAA,yBAAAT,KAAA,WAAA,IAwOCxB,EAAIA,SAAJ0B,EACAG,EAAIH,SAAQG,yBAAZL,KAAA,WAAA,GACAK,EAAIC,WAASG,SAAUF,yBAAuBP,KAA9C,WAAA,GAEIxB,EAAAA,cAAKrC,IAAW+D,IAChBG,EAAAA,aAAa,IAEhBK,cAjPF/E,SAiPE0E,GACD7B,IACIiC,EAAAA,EAAST,KAAA,aACTO,EAAJF,EAAeI,QACfd,QAAAC,IAAAe,GACAlF,EAAE6E,SAAA,UAAFC,WAAAC,YAAA,UACKL,GAAL3B,EArPD/C,EAAA,yCAAAuE,KAAA,WAAA,GAAAO,WAAAP,KAAA,WAAA,GAAA,GAAAzB,GAwPKC,EAAAA,yCAAJwB,KAAA,WAAA,GAAAO,WAAAP,KAAA,WAAA,IAGAL,SA7PDhE,SA6PCgE,GACIW,EAAAA,MACA/B,EAAAA,+BAAWqC,OAAfnF,EAAA,+BAEmBoF,QAGtBV,YApQExE,SAEAmF,GAAAA,GAoQKT,EAAAA,yEAAWU,SAAAH,OACXnF,EAAE,gBAAAsF,SAAAH,SAEFnF,EAAE,yEAAFsF,SAAAF,OACHpF,EAAA,gBAAAsF,SAAAF,SAGDG,eAAU,SAAAC,GACNxF,IAAAA,EAAE,IAAAyF,OAAA,QAAAD,EAAA,gBAAA,KACFxF,EAAEM,OAAAoF,SAAgBJ,OAASH,OAA3B,GAAAjE,MAAAyE,GAFJC,EAGO,GAaP,OAZM,MAAF5F,IACAA,EAAE6F,EAAA,KAhRPA,EAiREF,EAAA,OAUMC,GAA8B,IAAXA,GAA4B,aAAXA,EAAyB,GAAKA,GAPzEE,QAtRD5F,SAsRKyF,EAAAA,EAAUF,EAAOM,GACrB/F,EAAAgG,KAAIH,CACAD,KAAAA,MACAC,IAAK7C,KAATxC,KACIoF,EACJD,KAAAM,EACIC,SAAJ,OACAC,QAAOP,EA3RRQ,KAAAL,KA+RKjD,SAjSL5C,SAiSK4C,EAAMmD,EADHI,EAAAN,GAEHO,EAAAA,KAAAA,CACAC,KAAMN,OACNC,IAAAA,KAAU1F,KAJP8F,EAKHH,KAAAA,EACAC,SAAML,OANVI,QAAAE,EA9RDD,KAAAL,KAySKjD,OA3SL5C,WA4SU8C,KACLuD,QAAMN,OAHH,GAAA,SAAAO,GAIHN,QAAAA,IAAUM,GAJP,KAKHL,EAAAA,QACAC,EAAML,SAAAA,KAAAA,EAAAA,KAAAA,OANV/F,EAAA,yBAAAuE,KAAA,UAAAiC,EAAAD,KAAA,UAxSDvG,EAAA,4BAAAuE,KAAA,UAAAiC,EAAAD,KAAA,cAkTKxD,MAAOyD,EAAXC,YAKQzG,KAzTTE,WA0TSF,IAAAA,EAAEgD,KACLD,EAJDV,WAKIqE,EAAAA,SACH1G,EAAA,qBAAA2G,GAAA,QAAA,WARL5D,EAAAL,YAnTD1C,EAAA,YAAA2G,GAAA,QA+TI,WACC5D,IAAAA,EAAJ/C,EAAAgD,MACAD,EAAKV,SAALuE,KAEA5G,EAAE,wBAAwB2G,GAAA,QAAS,WAC/B5D,IAAAA,EAAA/C,EAAAgD,MADJD,EAAA4B,eAAAiC,KAII5G,EAAA,+BAAA2G,GAAA,QAAA,WACA5D,IAAAA,EAAKiB,EAAS4C,MAFlB7D,EAAAkC,cAAA2B,KAKI5G,EAAA,4CAAA2G,GAAA,OAAA,WACA5D,IAAAA,EAAK4B,EAAAA,MAFT5B,EAAAsB,UAAAuC,KAKI5G,EAAA,mCAAA2G,GAAA,SAAA,WACA5D,IAAAA,EAAKkC,EAAAA,MAFTlC,EAAA8D,SAAAD,KAKI5G,EAAA,2BAAA2G,GAAA,QAAA,WACA5D,EAAKsB,WAFTtB,EAAA+D,iBAQA9G","file":"donate.js","sourcesContent":["$(function () {\r\n    jQuery.support.cors = true;\r\n    let Base = window.Base || {};\r\n    Base = {\r\n        site: 'https://www.doubaner.top',\r\n        check: false,\r\n        payValue: 197,\r\n        modalShow: false,\r\n        language: (navigator.browserLanguage || navigator.language).toLowerCase(),\r\n        versions: function () {\r\n            var e = navigator.userAgent, t = e.toLowerCase();\r\n            navigator.appVersion;\r\n            return {\r\n                wechat: \"micromessenger\" == t.match(/MicroMessenger/i),\r\n                qq: \"qq\" == t.match(/QQ/i),\r\n                weibo: \"weibo\" == t.match(/WeiBo/i),\r\n                trident: e.indexOf(\"Trident\") > -1,\r\n                presto: e.indexOf(\"Presto\") > -1,\r\n                webKit: e.indexOf(\"AppleWebKit\") > -1,\r\n                gecko: e.indexOf(\"Gecko\") > -1 && -1 == e.indexOf(\"KHTML\"),\r\n                mobile: !!e.match(/AppleWebKit.*Mobile.*/),\r\n                ios: !!e.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),\r\n                android: e.indexOf(\"Android\") > -1 || e.indexOf(\"Linux\") > -1,\r\n                iPhone: e.indexOf(\"iPhone\") > -1,\r\n                iPad: e.indexOf(\"iPad\") > -1,\r\n                webApp: -1 == e.indexOf(\"Safari\")\r\n            }\r\n        }(),\r\n        fontSize: function () {\r\n            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window, t = e.document,\r\n                i = t.documentElement, n = \"orientationchange\" in e ? \"orientationchange\" : \"resize\",\r\n                o = function () {\r\n                    var e = i.clientWidth || 375;\r\n                    e > 750 && (e = 750), i.style.fontSize = e / 7.5 + \"px\"\r\n                };\r\n            window.getComputedStyle(i, null).getPropertyValue(\"font-size\") <= \"20px\" && o(), t.addEventListener && (e.addEventListener(n, o, !1), t.addEventListener(\"DOMContentLoaded\", o, !1))\r\n        },\r\n        showNav() {\r\n            $(\".common-header ol\").toggle();\r\n            $(\"body\").toggleClass('header-active');\r\n        },\r\n        checkForms(type) {\r\n            let that = this;\r\n            let params = {};\r\n            let regPhone = /^1[3-8]\\d{9}$/;\r\n            let regEmail = /^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/g;\r\n            ;\r\n            let invoicing = $(\"#receipt\").val();\r\n            params.username = $(\"#username\").val();\r\n            params.sex = $(\"#appellation\").val();\r\n            params.phone = $(\"#phone\").val();\r\n            params.email = $(\"#email\").val();\r\n            params.total_fee = $(\"input[name=total_fee]\").val();\r\n            params.invoicing = invoicing ? $(\"#select-choice\").val() : 0;\r\n            params.invoice = $(\"#organ-name\").val();\r\n            params.TaxID = $(\"#taxid\").val();\r\n            params.address = $(\"#address\").val();\r\n\r\n            if (type == 1) { // 全部都要，全部校验\r\n                if (!params.username) {\r\n                    $(\"#username\").next('span').text(\"您还没有填写名字呢\");\r\n                    return;\r\n                } else {\r\n                    $(\"#username\").next('span').text(\"\");\r\n                }\r\n                if (!regPhone.test(params.phone)) {\r\n                    $(\"#phone\").next('span').text(\"手机号码格式不对\");\r\n                    return;\r\n                } else {\r\n                    $(\"#phone\").next('span').text(\"\");\r\n                }\r\n                if (!regEmail.test(params.email)) {\r\n                    $(\"#email\").next('span').text(\"电子邮箱格式不对\");\r\n                    return;\r\n                } else {\r\n                    $(\"#email\").next('span').text(\"\");\r\n                }\r\n                if (!params.address) {\r\n                    $(\"#address\").next('span').text(\"邮寄地址不能为空\");\r\n                    return;\r\n                } else {\r\n                    $(\"#address\").next('span').text(\"\");\r\n                }\r\n                if (invoicing && !params.invoice) {\r\n                    $(\"#organ-name\").next('span').text(\"请输入发票抬头\");\r\n                    return;\r\n                } else {\r\n                    $(\"#organ-name\").next('span').text(\"\");\r\n                }\r\n                if (invoicing && !params.TaxID) {\r\n                    $(\"#taxid\").next('span').text(\"请输入税号\");\r\n                    return;\r\n                } else {\r\n                    $(\"#taxid\").next('span').text(\"\");\r\n                }\r\n                ;\r\n                that.check = true;\r\n                return params;\r\n            } else if (type == 2) { //不要发票,不用校验税号与发票抬头\r\n                if (!params.username) {\r\n                    $(\"#username\").next('span').text(\"您还没有填写名字呢\");\r\n                    return;\r\n                } else {\r\n                    $(\"#username\").next('span').text(\"\");\r\n                }\r\n                if (!regPhone.test(params.phone)) {\r\n                    $(\"#phone\").next('span').text(\"手机号码格式不对\");\r\n                    return;\r\n                } else {\r\n                    $(\"#phone\").next('span').text(\"\");\r\n                }\r\n                if (!regEmail.test(params.email)) {\r\n                    $(\"#email\").next('span').text(\"电子邮箱格式不对\");\r\n                    return;\r\n                } else {\r\n                    $(\"#email\").next('span').text(\"\");\r\n                }\r\n                if (!params.address) {\r\n                    $(\"#address\").next('span').text(\"邮寄地址不能为空\");\r\n                    return;\r\n                } else {\r\n                    $(\"#address\").next('span').text(\"\");\r\n                }\r\n                that.check = true;\r\n                return params;\r\n            } else { //小于100只校验名字\r\n                if (!params.username) {\r\n                    $(\"#username\").next('span').text(\"您还没有填写名字呢\");\r\n                    return;\r\n                } else {\r\n                    $(\"#username\").next('span').text(\"\");\r\n                }\r\n                that.check = true;\r\n                return params;\r\n            }\r\n        },\r\n        payOrder(e) {\r\n            let that = this;\r\n            let params = null;\r\n            let payValue = that.payValue;\r\n            let way = e.attr('data-type');\r\n            let radioValue = $(\"#form-group input[name=receipt]\").val();\r\n            if (payValue > 100) {\r\n                if (radioValue) {\r\n                    params = that.checkForms(1);\r\n                } else {\r\n                    params = that.checkForms(2);\r\n                }\r\n            } else {\r\n                params = that.checkForms(0);\r\n            }\r\n            if (that.check) {\r\n                params.way = way;\r\n                console.log(params);\r\n                // that.postAjax('/pay', params, function (res) {\r\n                //     that.check = false;\r\n                //     $(\"body\").html(res)\r\n                //     console.log(res);\r\n                //     if (params.way == 2) {\r\n                //         $('#qrcode-modal').show();\r\n                //         that.modalShow = true;\r\n                //     } else if (params.way == 1) {\r\n                //         // window.location.href = \"./alisuccess.html\";\r\n                //     }\r\n                // });\r\n                $(\"#pay-form\").submit();\r\n            }\r\n        },\r\n        blurCheck(e) {\r\n            console.log(111);\r\n            let that = this;\r\n            let regPhone = /^1[3-8]\\d{9}$/;\r\n            let regEmail = /^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/g;\r\n            let value = e.val();\r\n            let checkType = e.attr('data-check');\r\n            let optionCheck = $(\"input[name=receipt]:checked\").val();\r\n            switch (checkType) {\r\n                case \"name\":\r\n                    if (!value) {\r\n                        $(\"#username\").next('span').text(\"您还没有填写名字呢\");\r\n                    } else {\r\n                        $(\"#username\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"pay\":\r\n                    if (value < 100) {\r\n                        that.toggleForms(false);\r\n                        $(\"#pay-input\").val(value);\r\n                        that.payValue = value;\r\n                    } else {\r\n                        $(\"#pay-input\").val(value);\r\n                        that.toggleForms(true);\r\n                        that.payValue = value;\r\n                    }\r\n                    break;\r\n                case \"phone\":\r\n                    if (!regPhone.test(value)) {\r\n                        $(\"#phone\").next('span').text(\"手机号码格式不对\");\r\n                    } else {\r\n                        $(\"#phone\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"email\":\r\n                    if (!regEmail.test(value)) {\r\n                        $(\"#email\").next('span').text(\"电子邮箱格式不对\");\r\n                    } else {\r\n                        $(\"#email\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"address\":\r\n                    if (!value) {\r\n                        $(\"#address\").next('span').text(\"邮寄地址不能为空\");\r\n                    } else {\r\n                        $(\"#address\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"organ-name\":\r\n                    if (optionCheck && !value) {\r\n                        $(\"#organ-name\").next('span').text(\"请输入发票抬头1\");\r\n                    } else {\r\n                        $(\"#organ-name\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"taxid\":\r\n                    if (optionCheck && !value) {\r\n                        $(\"#taxid\").next('span').text(\"请输入税号\");\r\n                    } else {\r\n                        $(\"#taxid\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n        changePayValue(ele) {\r\n            let that = this;\r\n            let value = ele.attr('data-value');\r\n            ele.addClass('active').siblings().removeClass('active');\r\n            if (value) {\r\n                that.payValue = value;\r\n                ele.children(\"input[name=total_fee]\").attr(\"checked\", true);\r\n                ele.siblings().children(\"input[name=total_fee]\").attr(\"checked\", false);\r\n            }\r\n            that.payValue = value;\r\n            ele.children(\"input[name=total_fee]\").attr(\"checked\", true);\r\n            ele.siblings().children(\"input[name=total_fee]\").attr(\"checked\", false);\r\n            ;\r\n            $(\"#total_fee\").val(\"\");\r\n            that.toggleForms(true);\r\n        },\r\n        changePayType(ele) {\r\n            let that = this;\r\n            let type = ele.attr('data-type');\r\n            let index = ele.index();\r\n            console.log(index);\r\n            ele.addClass('active').siblings().removeClass('active');\r\n            if (type == 1) {\r\n                $(\"#pay-methods>.radio-group>input:eq(0)\").attr(\"checked\", true).siblings().attr(\"checked\", false);\r\n            }else if (type==2) {\r\n                $(\"#pay-methods>.radio-group>input:eq(1)\").attr(\"checked\", true).siblings().attr(\"checked\", false);\r\n            }\r\n        },\r\n        getCheck(ele) {\r\n            if (ele.val()) {\r\n                $(\"#form-group .receipt-choice\").show();\r\n            } else {\r\n                $(\"#form-group .receipt-choice\").hide();\r\n            }\r\n        },\r\n        toggleForms(args) {\r\n            if (args) {\r\n                $(\"#form-group input[data-check]:not([data-check='name']),.receipt-radio\").parent().show();\r\n                $(\"#appellation\").parent().show();\r\n            } else {\r\n                $(\"#form-group input[data-check]:not([data-check='name']),.receipt-radio\").parent().hide();\r\n                $(\"#appellation\").parent().hide();\r\n            }\r\n        },\r\n        getQueryString: function (name) {\r\n            var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n            var r = window.location.search.substr(1).match(reg); //获取url中\"?\"符后的字符串并正则匹配\r\n            var context = \"\";\r\n            if (r != null)\r\n                context = r[2];\r\n            reg = null;\r\n            r = null;\r\n            return context == null || context == \"\" || context == \"undefined\" ? \"\" : context;\r\n        },\r\n        getAjax(url, datas, fns, fnf) {\r\n            $.ajax({\r\n                type: \"GET\",\r\n                url: this.site + url,\r\n                data: datas,\r\n                dataType: 'JSON',\r\n                success: fns,\r\n                fail: fnf\r\n            });\r\n        },\r\n        postAjax(url, datas, fns, fnf) {\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: this.site + url,\r\n                data: datas,\r\n                dataType: 'json',\r\n                success: fns,\r\n                fail: fnf\r\n            });\r\n        },\r\n        setSeo() {\r\n            let that = this;\r\n            that.getAjax('/seo', {}, function (res) {\r\n                console.log(res);\r\n                if (res.status == 200) {\r\n                    $(\"title\").text(res.data.title);\r\n                    $(\"meta[name='keywords']\").attr('content', res.data['keywords']);\r\n                    $(\"meta[name='description']\").attr('content', res.data['description']);\r\n                } else {\r\n                    alert(res.message);\r\n                }\r\n            })\r\n\r\n        },\r\n        init() {\r\n            let that = this;\r\n            that.fontSize();\r\n            that.setSeo();\r\n            $(\".common-header ul\").on('click', function () {\r\n                that.showNav();\r\n            });\r\n            $(\"#pay-now\").on('click', function () {\r\n                let _this = $(this);\r\n                that.payOrder(_this);\r\n            });\r\n            $(\"#pay-methods-list>li\").on('click', function () {\r\n                let _this = $(this);\r\n                that.changePayValue(_this);\r\n            });\r\n            $(\"#pay-methods>.img-group>img\").on('click', function () {\r\n                let _this = $(this);\r\n                that.changePayType(_this);\r\n            });\r\n            $(\"#form-group input[data-check],#total_fee\").on('blur', function () {\r\n                let _this = $(this);\r\n                that.blurCheck(_this);\r\n            });\r\n            $(\"#form-group input[name=receipt]\").on('change', function () {\r\n                let _this = $(this);\r\n                that.getCheck(_this);\r\n            });\r\n            $('body,#qrcode-modal span').on('click', function () {\r\n                if (that.modalShow) {\r\n                    that.modalHide();\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Base.init();\r\n});"]}