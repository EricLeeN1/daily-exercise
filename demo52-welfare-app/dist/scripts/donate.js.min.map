{"version":3,"sources":["donate.js"],"names":["$","jQuery","support","cors","language","versions","window","Base","site","check","payValue","navigator","browserLanguage","toLowerCase","modalShow","e","t","appVersion","match","qq","wechat","indexOf","weibo","trident","presto","webKit","gecko","mobile","ios","android","iPhone","fontSize","arguments","length","document","i","clientWidth","style","getPropertyValue","o","addEventListener","n","toggle","showNav","toggleClass","type","that","this","checkForms","params","regPhone","val","regEmail","invoicing","username","sex","phone","email","total_fee","invoice","address","next","text","test","TaxID","paySet","console","log","html","way","payOrder","attr","radioValue","submit","blurCheck","optionCheck","checkType","value","toggleForms","ele","siblings","children","removeClass","index","addClass","getCheck","args","show","hide","parent","getQueryString","r","context","name","reg","location","search","substr","dataType","ajax","data","url","fail","fnf","datas","fns","res","alert","message","status","title","setSeo","init","on","_this","modalHide"],"mappings":"aAAAA,EAAE,WACEC,OAAOC,QAAQC,MAAO,EADxB,IAQMC,EACAC,EATMC,OAAAC,MACHL,CACHK,KAAAA,2BACJA,OAAO,EACHC,SAAM,IACNC,WAAO,EACPC,UAAUC,UAHPC,iBAAAD,UAAAP,UAAAS,cAIHC,UACAV,EAAWO,UAAUC,UACrBP,EAAUU,EAAAF,cACNF,UAAQA,WACJK,CACJL,OAAUM,kBAAVD,EAAAE,MAAA,mBACAC,GAAO,MAAAH,EAAAE,MAAA,OACHE,MAAAA,SAAQJ,EAAAE,MAAA,UACRC,SAFG,EAECJ,EAAAM,QAAQ,WACZC,QAA0B,EAAnBP,EAAAM,QAAWL,UAClBO,QAJG,EAIHA,EAASR,QAAA,eACTS,OAAQ,EAARA,EAAQT,QAAA,WALL,GAAAA,EAAAM,QAAA,SAMHI,SAAUJ,EAAAA,MAAQ,yBAClBK,MAAOX,EAAEM,MAAAA,iCACTM,SAAkB,EAATZ,EAACA,QAAQ,aARf,EAQeA,EAAAM,QARf,SASHO,QAAe,EAARb,EAAEG,QAAM,UACfW,MAAmB,EAAnBA,EAAAA,QAAWR,QACXS,QAAQf,GAAEM,EAAAA,QAAQ,YAXfU,SAAP,WAVD,IAAAhB,EAAA,EAAAiB,UAAAC,aAAA,IAAAD,UAAA,GAAAA,UAAA,GAAA1B,OA0BHyB,EAAUhB,EAAAmB,SACFnB,EAAIiB,EAAAA,gBACJhB,EAAID,sBADRA,EAAA,oBAAA,SAEIoB,EAAInB,WACA,IAAAD,EAAAoB,EAAAC,aAAA,IACA,IAAArB,IAAAA,EAAY,KAAAoB,EAAAE,MAAAN,SAAAhB,EAAA,IAAA,MAEZA,OAAAA,iBAAAoB,EAAsBA,MAAAG,iBAAuB,cAA7C,QAAAC,IAAAvB,EAAAwB,mBAAAzB,EAAAyB,iBAAAC,EAAAF,GAAA,GAAAvB,EAAAwB,iBAAA,mBAAAD,GAAA,KAERjC,QArCDJ,WAEAF,EAAA,qBAAA0C,SAqCHC,EAAAA,QArCGC,YAAA,kBAuCC5C,WAzCDE,SAyCG2C,GAvCH,IAAAC,EAAAC,KAyCHC,EAzCG,GA0CKF,EAAJ,gBACIG,EAAJ,8DACIC,EAAWlD,EAAA,YAAfmD,MAWAF,OAVAA,EAAIG,SAAWpD,EAAA,aAAAmD,MACfF,EAAII,IAAAA,EAAAA,gBAA0BF,MAC9BF,EAAOK,MAAPtD,EAAA,UAAoBmD,MACpBF,EAAOM,MAAQvD,EAAA,UAAAmD,MACfF,EAAOO,UAAUxD,EAAA,yBAAjBmD,MACAF,EAAOQ,UAAUJ,EAAFrD,EAAf,kBAAAmD,MAAA,EACAF,EAAOS,QAAP1D,EAAmBA,eAAEmD,MACrBF,EAAOI,MAAAA,EAAP,UAAmBA,MACnBJ,EAAOU,QAAU3D,EAAE,YAAAmD,MAEZS,GAAPX,EAGSA,EAAOK,UACRtD,EAAE,aAAa6D,KAAK,QAAQC,KAAK,IADrCZ,EAGOa,KAAAd,EAAAO,QAIHxD,EAAE,UAAU6D,KAAK,QAAQC,KAAK,IADlCV,EAGOW,KAAAd,EAAAQ,QAIHzD,EAAE,UAAU6D,KAAK,QAAQC,KAAK,IADlCb,EAGOW,SAIH5D,EAAE,YAAY6D,KAAK,QAAQC,KAAK,IADpCT,IAGOJ,EAAAU,aACH3D,EAAE,eAAY6D,KAAK,QAAQC,KAA3B,YAGA9D,EAAE,eAAe6D,KAAK,QAAQC,KAAK,IADvCT,IAGOJ,EAAAe,WACHhE,EAAE,UAAA6D,KAAeA,QAAKC,KAAQA,UAG9B9D,EAAE,UAAU6D,KAAK,QAAQC,KAAK,IAEjChB,EAHDrC,OAGO,EACDwC,UAlBFjD,EAAE,YAAU6D,KAAK,QAAQC,KAAzB,kBANA9D,EAAE,UAAU6D,KAAK,QAAQC,KAAK,kBAN9B9D,EAAE,UAAA6D,KAAaA,QAAKC,KAAQA,kBALhCjB,EAAAA,aAAWgB,KAAA,QAAAC,KAAA,aAoCV,GAAAjB,EACIpC,EAAL6C,UAGItD,EAACiD,aAAOK,KAAU,QAAAQ,KAAA,IAElBZ,EAAAa,KAAAd,EAAAO,QAIAxD,EAACkD,UAASa,KAAKd,QAAOO,KAAQ,IAE9BJ,EAAAW,KAAAd,EAAAQ,QAIAzD,EAACoD,UAASW,KAAKd,QAAOQ,KAAQ,IAE9BR,EAAAW,SAIA5D,EAACiD,YAAOW,KAAS,QAAAE,KAAA,IAEjBhB,EAAArC,OAAA,EACGwC,QATPjD,EAAA,YAGO6D,KAAA,QAAAC,KAAA,kBATP9D,EAAA,UAGO6D,KAAA,QAAAC,KAAA,kBATP9D,EAAA,UAGO6D,KAAA,QAAAC,KAAA,kBALP9D,EAAA,aAAA6D,KAAA,QAAAC,KAAA,aAyBCb,EAAAK,UAGItD,EAAA,aAAA6D,KAAA,QAAAC,KAAA,IAED9D,EAAAA,OAAE,EACFiD,QALJH,EAAKrC,aAALoD,KAAA,QAAAC,KAAA,cAQCG,OAnIN/D,WAoIK4C,IAAAA,EAAKrC,KACL,GAAAqC,EAAAzC,SAAAe,OAAA,CAnIL8C,QAAAC,IAAArB,EAAAzC,SAAAe,QAwICpB,EAAA,gBAWgBK,KAnJjB+D,yVAoJK,GAAAtB,EAAAzC,SAAAoB,QAAAqB,EAAAzC,SAAAsB,OAAA,CAeA0C,EAAAA,gBAAaD,KAPXA,qVAUFE,SAxKLpE,SAwKKa,GACIkC,IAAAA,EAAAA,KACHA,EAAM,KACHA,EAAAA,EAASH,SACZuB,EAAAtD,EAAAwD,KAAA,aALLC,EAMOxE,EAAA,mCAAAmD,MAGHL,EAFSA,IAATG,EACHuB,EACe1B,EAAAE,WAAA,GAEAC,EAAZD,WAAA,GAGAF,EAAAE,WAAA,GAEAF,EAAArC,QACAwC,EAAAoB,IAAAA,EACAH,QAAAC,IAAAlB,GAYAG,EAAAA,aAAWqB,WAGfC,UAxMDxE,SAwMKyE,GACJT,QAAQU,IAAAA,KACJ,IAAA9B,EAAKC,KAGA8B,EAFD9D,EAAAoC,MAGInD,EAAEe,EAAAwD,KAAA,cACLI,EAAA3E,EAAA,+BAAAmD,MACD,OAAAyB,GACJ,IAAK,OACGC,EAGA/B,EAAAA,aAAAe,KAAgBgB,QAAhBf,KAAA,IAFAhB,EAAAA,aAAKgC,KAAY,QAAjBhB,KAAA,aAIA9D,MACA8C,IAAAA,MAIHA,EAALpC,UAHQoC,EAAKpC,KACRoC,EAAAgC,aAAA,GACD9E,EAAA,cAAAmD,IAAA0B,KAGI7E,EAAE,cAAFmD,IAAiB0B,GADrB/B,EAEOgC,aAAA,IAHXD,GAMI,MACJ,IAAK,QAxBIA,gBAyBSd,KAAKc,GAGf7E,EAAE,UAAU6D,KAAK,QAAQC,KAAK,IAF9B9D,EAAE,UAAU6D,KAAK,QAAQC,KAAK,YAIlC,MACJ,IAAK,QA9BK,8DA+BMC,KAAAc,GAGR7E,EAAE,UAAF6D,KAAcA,QAAdC,KAA2BA,IAF3B9D,EAAE,UAAF6D,KAAcA,QAAdC,KAA2BA,YAI/B,MACJ,IAAK,UACGa,EAGA3E,EAAE,YAAA6D,KAAeA,QAAKC,KAAQA,IAF9B9D,EAAE,YAAA6D,KAAeA,QAAKC,KAAQA,YAIlC,MACJ,IAAK,aACGa,IAAgBE,EAChB7E,EAAE,eAAe6D,KAAA,QAAaC,KAAA,YAE9B9D,EAAE,eAAe6D,KAAA,QAAaC,KAA9B,IAEJ,MACJ,IAAA,QACIa,IAAAE,EAvDR7E,EAAA,UAAA6D,KAAA,QAAAC,KAAA,SAvMD9D,EAAA,UAAA6D,KAAA,QAiQYkB,KAAK,MAOZA,eA1QL7E,SA0QS8E,GACP,IAAAlC,EAAAC,KACDD,EAAKpC,EAAWmE,KAAhB,cACAE,EAAIE,SAAS,UAAAD,WAAAE,YAA8B,UACvCF,IACFlC,EAAApC,SAAkBmE,EACpB/B,EAAKgC,SAAY,yBAAjBP,KAAA,WAAA,GA9QDQ,EAAAC,WAAAC,SAAA,yBAAAV,KAAA,WAAA,IAiRCzB,EAAIA,SAAJ+B,EACAE,EAAIlC,SAAOkC,yBAAXR,KAAA,WAAA,GACAQ,EAAII,WAAQJ,SAAZ,yBAAAR,KAAA,WAAA,GACAL,EAAAA,cAAYiB,IAAZ,IACAJ,EAAIK,aAAS,IAETpF,cAzRLE,SAyRO6E,GACL,IACG/E,EAAE+E,EAAAR,KAAA,aACLY,EAAAJ,EAAAI,QA1RFjB,QAAAC,IAAAgB,GA4RHE,EA5RGD,SAAA,UAAAJ,WA4RWE,YAAA,UACN,GAAAH,EACA/E,EAAE,yCAAFuE,KAAA,WAAA,GAAAS,WAAAT,KAAA,WAAA,GACG,GAAA1B,GACH7C,EAAE,yCAAFuE,KAAA,WAAA,GAAAS,WAAAT,KAAA,WAAA,IAGRO,SArSG5E,SAqSH4E,GACQQ,EAAJnC,MACInD,EAAE,+BAAAuF,OADNvF,EAAA,+BAGOwF,QAGNV,YA5SF5E,SA4SEoF,GA1SFA,GAqSKtF,EAAE,yEAAyEyF,SAASF,OAO5FG,EAAAA,gBAAgBD,SAAAF,SAERI,EAAAA,yEAAiDF,SAAAD,OACjDI,EAAAA,gBAAJH,SAAAD,SAIAG,eAAA,SAAAE,GACA,IAAAC,EAAOF,IAAAA,OAAW,QAAQA,EAAW,gBAAiB,KApTvDD,EAAArF,OAAAyF,SAAAC,OAAAC,OAAA,GAAA/E,MAAA4E,GAAAF,EAAA,GA2TKM,OAJG,MAALC,IACEtD,EAAM8C,EADH,KAGHS,EADAC,EAAAA,OAEAH,GAJG,IAAAN,GAAA,aAAAA,EAAA,GAAAA,GAMHU,QA/TLpG,SA+TKoG,EAAAA,EAAMC,EAAAA,GANHvG,EAAPmG,KAAA,CAvTDtD,KAAA,MAAAwD,IAAAtD,KAAAvC,KAAA6F,EAiUGF,KAAKK,EACH3D,SAAM,OACNwD,QAAKI,EACLL,KAAMI,KAGNF,SAzULpG,SAyUKoG,EAAMC,EAAAA,EAAAA,GANHvG,EAAPmG,KAAA,CAjUDtD,KAAA,OAAAwD,IAAAtD,KAAAvC,KAAA6F,EA2UKvD,KAAAA,EACJA,SAAa,OACToB,QAAQC,EACRmC,KAAII,KAGA1G,OAnVTE,WAoVY6C,KACH4D,QAAAA,OAAUC,GAAV,SAAAF,GACHxC,QAAAC,IAAAuC,GARL,KAAAA,EAAAG,QA5UD7G,EAAA,SAAA8D,KAAA4C,EAAAN,KAAAU,OAAA9G,EAAA,yBAuVIuE,KAAA,UAAAmC,EAAAN,KAAA,UACCtD,EAAAA,4BAAJyB,KAAA,UAAAmC,EAAAN,KAAA,cAEKW,MAALL,EAAAE,YAICI,KAhWF9G,WAiWCF,IAAE8C,EAAAC,KACED,EAAAf,WACAe,EAAAA,SACHA,EAHDmB,SAIAjE,EAAE,qBAAAiH,GAAwBA,QAAG,WACzBnE,EAAIoE,YAEPlH,EAHD,YAAAiH,GAAA,QAAA,WAIE,IAAAC,EAAAlH,EAAA+C,MACED,EAAIoE,SAAUA,KAEjBlH,EAHD,wBAAAiH,GAAA,QAAA,WAIE,IAAAC,EAAAlH,EAAA+C,MACED,EAAIoE,eAAJA,KAEHlH,EAHD,+BAAAiH,GAAA,QAAA,WAIE,IAAAC,EAAAlH,EAAA+C,MACED,EAAIoE,cAAJA,KAEHlH,EAHD,4CAAAiH,GAAA,OAAA,WAIE,IAAAC,EAAAlH,EAAA+C,MACED,EAAIA,UAAKhC,KAERd,EAAA,mCAAAiH,GAAA,SAAA,WAHL,IAAAC,EAAAlH,EAAA+C,MAKHD,EAAAuC,SAAA6B,KAEAF,EAAL,2BAAAC,GAAA,QAAA,WA7XJnE,EAAAhC,WAwXoBgC,EAAKqE,iBAKhBH","file":"donate.js","sourcesContent":["$(function () {\r\n    jQuery.support.cors = true;\r\n    let Base = window.Base || {};\r\n    Base = {\r\n        site: 'https://www.doubaner.top',\r\n        check: false,\r\n        payValue: 197,\r\n        modalShow: false,\r\n        language: (navigator.browserLanguage || navigator.language).toLowerCase(),\r\n        versions: function () {\r\n            var e = navigator.userAgent,\r\n                t = e.toLowerCase();\r\n            navigator.appVersion;\r\n            return {\r\n                wechat: \"micromessenger\" == t.match(/MicroMessenger/i),\r\n                qq: \"qq\" == t.match(/QQ/i),\r\n                weibo: \"weibo\" == t.match(/WeiBo/i),\r\n                trident: e.indexOf(\"Trident\") > -1,\r\n                presto: e.indexOf(\"Presto\") > -1,\r\n                webKit: e.indexOf(\"AppleWebKit\") > -1,\r\n                gecko: e.indexOf(\"Gecko\") > -1 && -1 == e.indexOf(\"KHTML\"),\r\n                mobile: !!e.match(/AppleWebKit.*Mobile.*/),\r\n                ios: !!e.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),\r\n                android: e.indexOf(\"Android\") > -1 || e.indexOf(\"Linux\") > -1,\r\n                iPhone: e.indexOf(\"iPhone\") > -1,\r\n                iPad: e.indexOf(\"iPad\") > -1,\r\n                webApp: -1 == e.indexOf(\"Safari\")\r\n            }\r\n        }(),\r\n        fontSize: function () {\r\n            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window,\r\n                t = e.document,\r\n                i = t.documentElement,\r\n                n = \"orientationchange\" in e ? \"orientationchange\" : \"resize\",\r\n                o = function () {\r\n                    var e = i.clientWidth || 375;\r\n                    e > 750 && (e = 750), i.style.fontSize = e / 7.5 + \"px\"\r\n                };\r\n            window.getComputedStyle(i, null).getPropertyValue(\"font-size\") <= \"20px\" && o(), t.addEventListener && (e.addEventListener(n, o, !1), t.addEventListener(\"DOMContentLoaded\", o, !1))\r\n        },\r\n        showNav() {\r\n            $(\".common-header ol\").toggle();\r\n            $(\"body\").toggleClass('header-active');\r\n        },\r\n        checkForms(type) {\r\n            let that = this;\r\n            let params = {};\r\n            let regPhone = /^1[3-8]\\d{9}$/;\r\n            let regEmail = /^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/g;;\r\n            let invoicing = $(\"#receipt\").val();\r\n            params.username = $(\"#username\").val();\r\n            params.sex = $(\"#appellation\").val();\r\n            params.phone = $(\"#phone\").val();\r\n            params.email = $(\"#email\").val();\r\n            params.total_fee = $(\"input[name=total_fee]\").val();\r\n            params.invoicing = invoicing ? $(\"#select-choice\").val() : 0;\r\n            params.invoice = $(\"#organ-name\").val();\r\n            params.TaxID = $(\"#taxid\").val();\r\n            params.address = $(\"#address\").val();\r\n\r\n            if (type == 1) { // 全部都要，全部校验\r\n                if (!params.username) {\r\n                    $(\"#username\").next('span').text(\"您还没有填写名字呢\");\r\n                    return;\r\n                } else {\r\n                    $(\"#username\").next('span').text(\"\");\r\n                }\r\n                if (!regPhone.test(params.phone)) {\r\n                    $(\"#phone\").next('span').text(\"手机号码格式不对\");\r\n                    return;\r\n                } else {\r\n                    $(\"#phone\").next('span').text(\"\");\r\n                }\r\n                if (!regEmail.test(params.email)) {\r\n                    $(\"#email\").next('span').text(\"电子邮箱格式不对\");\r\n                    return;\r\n                } else {\r\n                    $(\"#email\").next('span').text(\"\");\r\n                }\r\n                if (!params.address) {\r\n                    $(\"#address\").next('span').text(\"邮寄地址不能为空\");\r\n                    return;\r\n                } else {\r\n                    $(\"#address\").next('span').text(\"\");\r\n                }\r\n                if (invoicing && !params.invoice) {\r\n                    $(\"#organ-name\").next('span').text(\"请输入发票抬头\");\r\n                    return;\r\n                } else {\r\n                    $(\"#organ-name\").next('span').text(\"\");\r\n                }\r\n                if (invoicing && !params.TaxID) {\r\n                    $(\"#taxid\").next('span').text(\"请输入税号\");\r\n                    return;\r\n                } else {\r\n                    $(\"#taxid\").next('span').text(\"\");\r\n                };\r\n                that.check = true;\r\n                return params;\r\n            } else if (type == 2) { //不要发票,不用校验税号与发票抬头\r\n                if (!params.username) {\r\n                    $(\"#username\").next('span').text(\"您还没有填写名字呢\");\r\n                    return;\r\n                } else {\r\n                    $(\"#username\").next('span').text(\"\");\r\n                }\r\n                if (!regPhone.test(params.phone)) {\r\n                    $(\"#phone\").next('span').text(\"手机号码格式不对\");\r\n                    return;\r\n                } else {\r\n                    $(\"#phone\").next('span').text(\"\");\r\n                }\r\n                if (!regEmail.test(params.email)) {\r\n                    $(\"#email\").next('span').text(\"电子邮箱格式不对\");\r\n                    return;\r\n                } else {\r\n                    $(\"#email\").next('span').text(\"\");\r\n                }\r\n                if (!params.address) {\r\n                    $(\"#address\").next('span').text(\"邮寄地址不能为空\");\r\n                    return;\r\n                } else {\r\n                    $(\"#address\").next('span').text(\"\");\r\n                }\r\n                that.check = true;\r\n                return params;\r\n            } else { //小于100只校验名字\r\n                if (!params.username) {\r\n                    $(\"#username\").next('span').text(\"您还没有填写名字呢\");\r\n                    return;\r\n                } else {\r\n                    $(\"#username\").next('span').text(\"\");\r\n                }\r\n                that.check = true;\r\n                return params;\r\n            }\r\n        },\r\n        paySet() {\r\n            let that = this;\r\n            if (that.versions.wechat) {\r\n                // 微信里面\r\n                console.log(that.versions.wechat);\r\n                let html = `\r\n                <div class=\"radio-group\">\r\n                    <input hidden type=\"radio\" name=\"way\" value=\"2\" data-type=\"2\" alt=\"微信\" checked>\r\n                </div>\r\n                <div class=\"img-group\">\r\n                    <img src=\"./images/donate/wechat-pay@2x.png\" data-type=\"2\" class=\"active\" alt=\"\">\r\n                </div>`;\r\n                $(\"#pay-methods\").html(html);\r\n            } else if (that.versions.webKit && that.versions.mobile) {\r\n                // 除了微信以外的浏览器里面\r\n                let html = `\r\n                <div class=\"radio-group\">\r\n                    <input hidden type=\"radio\" name=\"way\" value=\"1\" data-type=\"1\" alt=\"支付宝\" checked>\r\n                </div>\r\n                <div class=\"img-group\">\r\n                    <img src=\"./images/donate/ali-pay@2x.png\" alt=\"\" data-type=\"1\"  class=\"active\">\r\n                </div>`;\r\n                $(\"#pay-methods\").html(html);\r\n            }\r\n        },\r\n        payOrder(e) {\r\n            let that = this;\r\n            let params = null;\r\n            let payValue = that.payValue;\r\n            let way = e.attr('data-type');\r\n            let radioValue = $(\"#form-group input[name=receipt]\").val();\r\n            if (payValue > 100) {\r\n                if (radioValue) {\r\n                    params = that.checkForms(1);\r\n                } else {\r\n                    params = that.checkForms(2);\r\n                }\r\n            } else {\r\n                params = that.checkForms(0);\r\n            }\r\n            if (that.check) {\r\n                params.way = way;\r\n                console.log(params);\r\n                // that.postAjax('/pay', params, function (res) {\r\n                //     that.check = false;\r\n                //     $(\"body\").html(res)\r\n                //     console.log(res);\r\n                //     if (params.way == 2) {\r\n                //         $('#qrcode-modal').show();\r\n                //         that.modalShow = true;\r\n                //     } else if (params.way == 1) {\r\n                //         // window.location.href = \"./alisuccess.html\";\r\n                //     }\r\n                // });\r\n                $(\"#pay-form\").submit();\r\n            }\r\n        },\r\n        blurCheck(e) {\r\n            console.log(111);\r\n            let that = this;\r\n            let regPhone = /^1[3-8]\\d{9}$/;\r\n            let regEmail = /^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/g;\r\n            let value = e.val();\r\n            let checkType = e.attr('data-check');\r\n            let optionCheck = $(\"input[name=receipt]:checked\").val();\r\n            switch (checkType) {\r\n                case \"name\":\r\n                    if (!value) {\r\n                        $(\"#username\").next('span').text(\"您还没有填写名字呢\");\r\n                    } else {\r\n                        $(\"#username\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"pay\":\r\n                    if (value < 100) {\r\n                        that.toggleForms(false);\r\n                        $(\"#pay-input\").val(value);\r\n                        that.payValue = value;\r\n                    } else {\r\n                        $(\"#pay-input\").val(value);\r\n                        that.toggleForms(true);\r\n                        that.payValue = value;\r\n                    }\r\n                    break;\r\n                case \"phone\":\r\n                    if (!regPhone.test(value)) {\r\n                        $(\"#phone\").next('span').text(\"手机号码格式不对\");\r\n                    } else {\r\n                        $(\"#phone\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"email\":\r\n                    if (!regEmail.test(value)) {\r\n                        $(\"#email\").next('span').text(\"电子邮箱格式不对\");\r\n                    } else {\r\n                        $(\"#email\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"address\":\r\n                    if (!value) {\r\n                        $(\"#address\").next('span').text(\"邮寄地址不能为空\");\r\n                    } else {\r\n                        $(\"#address\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"organ-name\":\r\n                    if (optionCheck && !value) {\r\n                        $(\"#organ-name\").next('span').text(\"请输入发票抬头1\");\r\n                    } else {\r\n                        $(\"#organ-name\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"taxid\":\r\n                    if (optionCheck && !value) {\r\n                        $(\"#taxid\").next('span').text(\"请输入税号\");\r\n                    } else {\r\n                        $(\"#taxid\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n        changePayValue(ele) {\r\n            let that = this;\r\n            let value = ele.attr('data-value');\r\n            ele.addClass('active').siblings().removeClass('active');\r\n            if (value) {\r\n                that.payValue = value;\r\n                ele.children(\"input[name=total_fee]\").attr(\"checked\", true);\r\n                ele.siblings().children(\"input[name=total_fee]\").attr(\"checked\", false);\r\n            }\r\n            that.payValue = value;\r\n            ele.children(\"input[name=total_fee]\").attr(\"checked\", true);\r\n            ele.siblings().children(\"input[name=total_fee]\").attr(\"checked\", false);;\r\n            $(\"#total_fee\").val(\"\");\r\n            that.toggleForms(true);\r\n        },\r\n        changePayType(ele) {\r\n            let that = this;\r\n            let type = ele.attr('data-type');\r\n            let index = ele.index();\r\n            console.log(index);\r\n            ele.addClass('active').siblings().removeClass('active');\r\n            if (type == 1) {\r\n                $(\"#pay-methods>.radio-group>input:eq(0)\").attr(\"checked\", true).siblings().attr(\"checked\", false);\r\n            } else if (type == 2) {\r\n                $(\"#pay-methods>.radio-group>input:eq(1)\").attr(\"checked\", true).siblings().attr(\"checked\", false);\r\n            }\r\n        },\r\n        getCheck(ele) {\r\n            if (ele.val()) {\r\n                $(\"#form-group .receipt-choice\").show();\r\n            } else {\r\n                $(\"#form-group .receipt-choice\").hide();\r\n            }\r\n        },\r\n        toggleForms(args) {\r\n            if (args) {\r\n                $(\"#form-group input[data-check]:not([data-check='name']),.receipt-radio\").parent().show();\r\n                $(\"#appellation\").parent().show();\r\n            } else {\r\n                $(\"#form-group input[data-check]:not([data-check='name']),.receipt-radio\").parent().hide();\r\n                $(\"#appellation\").parent().hide();\r\n            }\r\n        },\r\n        getQueryString: function (name) {\r\n            var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n            var r = window.location.search.substr(1).match(reg); //获取url中\"?\"符后的字符串并正则匹配\r\n            var context = \"\";\r\n            if (r != null)\r\n                context = r[2];\r\n            reg = null;\r\n            r = null;\r\n            return context == null || context == \"\" || context == \"undefined\" ? \"\" : context;\r\n        },\r\n        getAjax(url, datas, fns, fnf) {\r\n            $.ajax({\r\n                type: \"GET\",\r\n                url: this.site + url,\r\n                data: datas,\r\n                dataType: 'JSON',\r\n                success: fns,\r\n                fail: fnf\r\n            });\r\n        },\r\n        postAjax(url, datas, fns, fnf) {\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: this.site + url,\r\n                data: datas,\r\n                dataType: 'json',\r\n                success: fns,\r\n                fail: fnf\r\n            });\r\n        },\r\n        setSeo() {\r\n            let that = this;\r\n            that.getAjax('/seo', {}, function (res) {\r\n                console.log(res);\r\n                if (res.status == 200) {\r\n                    $(\"title\").text(res.data.title);\r\n                    $(\"meta[name='keywords']\").attr('content', res.data['keywords']);\r\n                    $(\"meta[name='description']\").attr('content', res.data['description']);\r\n                } else {\r\n                    alert(res.message);\r\n                }\r\n            })\r\n        },\r\n        init() {\r\n            let that = this;\r\n            that.fontSize();\r\n            that.setSeo();\r\n            that.paySet();\r\n            $(\".common-header ul\").on('click', function () {\r\n                that.showNav();\r\n            });\r\n            $(\"#pay-now\").on('click', function () {\r\n                let _this = $(this);\r\n                that.payOrder(_this);\r\n            });\r\n            $(\"#pay-methods-list>li\").on('click', function () {\r\n                let _this = $(this);\r\n                that.changePayValue(_this);\r\n            });\r\n            $(\"#pay-methods>.img-group>img\").on('click', function () {\r\n                let _this = $(this);\r\n                that.changePayType(_this);\r\n            });\r\n            $(\"#form-group input[data-check],#total_fee\").on('blur', function () {\r\n                let _this = $(this);\r\n                that.blurCheck(_this);\r\n            });\r\n            $(\"#form-group input[name=receipt]\").on('change', function () {\r\n                let _this = $(this);\r\n                that.getCheck(_this);\r\n            });\r\n            $('body,#qrcode-modal span').on('click', function () {\r\n                if (that.modalShow) {\r\n                    that.modalHide();\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Base.init();\r\n});"]}