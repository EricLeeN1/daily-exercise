{"version":3,"sources":["index.js"],"names":["$","window","Base","changeRuby","isClient","document","getElementsByTagName","i","word","length","element","split","text","textArray","j","jelehtml","changeTitle","getElementsByClassName","getWord","e","alert","that","init","this","callback","userAgent","indexOf","navigator","setupWebViewJavascriptBridge","WebViewJavascriptBridge","WVJBCallbacks","push","WVJBIframe","display","createElement","documentElement","appendChild","setTimeout","src","removeChild","bridge","message","responseCallback","registerHandler","Javascript Responds","data","on","_ele"],"mappings":"aAAAA,EAAE,WACaC,OAAOC,MADpB,CACMA,SAAOD,KACXC,WAFF,WAIMC,IADAC,IAAAA,EADGC,SAAAC,qBAAA,QAAAC,EAAA,EAAAA,EAAAC,EAAAC,OAEUF,IAAA,CAKL,IAJAC,IAAAA,EAAgBF,EAAAA,GAEVI,EADVA,EAAoBF,UAAaD,OAC7BI,MAAA,IACIC,EAAOF,GACPG,EAAAA,EAAYD,EAAAA,EAAhBH,OAAAK,IAAA,CAEAC,GAAAA,0BADAF,EAAAC,GACA,UAEIC,EAAAA,UAAAA,IAGPC,YAhBX,WAkBMA,IAhBG,IAAAR,EAAAH,SAAAY,uBAAA,UAAAV,EAAA,EAAAA,EAAAC,EAAAC,OAgBWF,IAAA,CAKN,IAJAC,IAAAA,EAAgBS,EAAAA,GAEVP,EADVA,EAAoBF,UAAaD,OAC7BI,MAAA,IACIC,EAAOF,GACPG,EAAAA,EAAYD,EAAAA,EAAhBH,OAAAK,IAAA,CAEAC,GAAAA,0BADAF,EAAAC,GACA,UAEIC,EAAAA,UAAAA,IAGPG,QA9BX,SA8BWC,GA5BF,IAAAX,EAAAW,EAAAP,OA8BHM,MA9BGV,GAgCCY,GADWD,KACLX,SAAN,CACIa,IAAAA,EAAJ,CACIA,KAAKjB,GAEDI,wBAAMA,YAAAA,UAAAA,EAAAA,SAAAA,QAGbc,KAzCX,WAES,IAAAD,EAAAE,MAAA,SAyCIC,GACCH,IAAJ,EAAIA,UAAJI,UAAAC,QAAA,aAAA,EAAAC,UAAAF,UAAAC,QAAA,SACSE,OAAAA,wBACDD,EAAUF,yBAEND,SAASK,iBACN,+BACHxB,WAGQmB,EAASK,2BAIpB,QAGG,IAAA,EAAAF,UAAO1B,UAAO6B,QAAcC,YAA5B,EAAAJ,UAAAF,UAAAC,QAAA,QAAA,CACH,GAAAzB,OAAA6B,cACD7B,OAAO6B,OAAAA,cAAgBC,KAAvBP,GAEAQ,OAAAA,cAAiBC,CAAjBT,GACAQ,IAAAA,EAAiB3B,SAAA6B,cAAA,UACjB7B,EAAS8B,MAAAA,QAAgBC,OACzBC,EAAWC,IAAA,iCACPjC,SAAAA,gBAAS8B,YAAgBI,GAC5BF,WAFD,WAGHhC,SAAA8B,gBAAAI,YAAAP,IAEJ,IAIWJ,CAAW,SAAAY,KACgB,EAAvBb,UAAAF,UAAAC,QAAA,aAAuB,EAAAC,UAAAF,UAAAC,QAAA,WADhBc,EAAXlB,KAAA,SAAAmB,EAAAC,GAMDC,EAHCD,CAJJE,sBAAA,YAUAvB,EAAAA,gBAAA,qBAAA,SAAAwB,EAAAH,GACAA,EAAAA,UAAAA,EAJJrB,EAAAlB,aATJkB,EAAAL,cAgBE0B,EAAkB,cAGnB1C,EAHD,eAAA8C,GAAA,QAAA,YAAA,WAIH,IAAAC,EAAA/C,EAAAuB,MA3FLF,EAAAH,QAAA6B,QA6FKzB","file":"index.js","sourcesContent":["$(function () {\r\n    let Base = window.Base || {};\r\n    Base = {\r\n        isClient: null,\r\n        changeRuby() {\r\n            let word = document.getElementsByTagName('ruby');\r\n            for (let i = 0; i < word.length; i++) {\r\n                const element = word[i];\r\n                let text = element.innerHTML.trim();\r\n                let textArray = text.split('');\r\n                let jelehtml = '';\r\n                for (let j = 0; j < textArray.length; j++) {\r\n                    const jele = textArray[j];\r\n                    jelehtml += `<span class=\"getwords\">${jele}</span>`;\r\n                }\r\n                element.innerHTML = jelehtml;\r\n            }\r\n        },\r\n        changeTitle() {\r\n            let word = document.getElementsByClassName('zw-tit');\r\n            for (let i = 0; i < word.length; i++) {\r\n                const element = word[i];\r\n                let text = element.innerHTML.trim();\r\n                let textArray = text.split('');\r\n                let jelehtml = '';\r\n                for (let j = 0; j < textArray.length; j++) {\r\n                    const jele = textArray[j];\r\n                    jelehtml += `<span class=\"getwords\">${jele}</span>`;\r\n                }\r\n                element.innerHTML = jelehtml;\r\n            }\r\n        },\r\n        getWord(e) {\r\n            let word = e.text();\r\n            alert(word);\r\n            let that = this;\r\n            if (that.isClient) {\r\n                let params = {\r\n                    word: word\r\n                };\r\n                WebViewJavascriptBridge.callHandler('getWord', params, function (response) {});\r\n            }\r\n        },\r\n        init() {\r\n            let that = this;\r\n            function setupWebViewJavascriptBridge(callback) {\r\n                if (navigator.userAgent.indexOf('Android') > -1 || navigator.userAgent.indexOf('Linux') > -1) {\r\n                    if (window.WebViewJavascriptBridge) {\r\n                        callback(WebViewJavascriptBridge)\r\n                    } else {\r\n                        document.addEventListener(\r\n                            'WebViewJavascriptBridgeReady',\r\n                            function () {\r\n                                callback(WebViewJavascriptBridge)\r\n                            },\r\n                            false\r\n                        );\r\n                    }\r\n                } else if (navigator.userAgent.indexOf('iPhone') > -1 || navigator.userAgent.indexOf('iPad') > -1) {\r\n                    if (window.WVJBCallbacks) {\r\n                        return window.WVJBCallbacks.push(callback);\r\n                    }\r\n                    window.WVJBCallbacks = [callback];\r\n                    var WVJBIframe = document.createElement('iframe');\r\n                    WVJBIframe.style.display = 'none';\r\n                    WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';\r\n                    document.documentElement.appendChild(WVJBIframe);\r\n                    setTimeout(function () {\r\n                        document.documentElement.removeChild(WVJBIframe)\r\n                    }, 0);\r\n                }\r\n\r\n            };\r\n            setupWebViewJavascriptBridge(function (bridge) {\r\n                if (navigator.userAgent.indexOf('Android') > -1 || navigator.userAgent.indexOf('Linux') > -1) {\r\n                    bridge.init(function (message, responseCallback) {\r\n                        var data = {\r\n                            'Javascript Responds': '测试中文!'\r\n                        };\r\n                        responseCallback(data);\r\n                    });\r\n                };\r\n                bridge.registerHandler('isConfirmAgainSelf', function (data, responseCallback) {\r\n                    that.isClient = true;\r\n                    that.changeRuby();\r\n                    that.changeTitle();\r\n                    responseCallback('js执行过了');\r\n                });\r\n            });\r\n            $(\".zw-content\").on('click', '.getwords', function () {\r\n                let _ele = $(this);\r\n                that.getWord(_ele);\r\n            })\r\n        }\r\n    }\r\n    Base.init();\r\n});"]}