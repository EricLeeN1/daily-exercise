<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>编程式的导航</title>
</head>

<body>
    <script src='../../vue.min.js'></script>
    <script src='../../vue-router.js'></script>
    <div id='app'>
        <h2>编程式的导航</h2>
        <p v-on:click="goFoo">goFoo</p>
        <p v-on:click="goHome">goHome</p>
        <p v-on:click="goBar">goBar</p>
        <p>
            <router-link to="/user/">Home</router-link>
            <router-link to="/user/foo">foo</router-link>
            <router-link to="/user/bar">bar</router-link>
        </p>
        <router-view></router-view>
    </div>
    <script>
        const User = {
            template: `
            <div class="user">
                <h2>User {{$route.params.id}}</h2>
                <router-view></router-view>  
            </div>`,
            watch: {
                '$route' (to, from) {
                    //对路由变化做出响应
                    console.log(to);
                    console.log(from);
                }
            },
        }
        const UserHome = {
            template: '<div>Home</div>'
        };

        const UserFoo = {
            template: '<div>Foo</div>'
        }

        const UserBar = {
            template: '<div>Bar</div>'
        }

        const router = new VueRouter({
            routes: [{
                path: '/:id',
                component: User,
                children: [{
                        path: 'foo',
                        component: UserFoo
                    },
                    {
                        path: '',
                        component: UserHome
                    },
                    {
                        path: 'bar',
                        component: UserBar
                    }
                ]
            }]
        })
        const vm = new Vue({
            // el: '#app',
            router,
            methods: {
                goHome() {
                    router.push('/');
                },
                goFoo() {
                    router.push('/foo');
                },
                goBar() {
                    router.push('/bar');
                },
            }
        }).$mount('#app');
    </script>
</body>

</html>