"use strict";$(function(){jQuery.support.cors=!0;window.Base;({site:"https://www.doubaner.top",pagesLength:1,page:1,getInfos:function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,u=this,t=u.getQueryString("type"),e="/news/page/"+c+"/column/"+t;u.getAjax(e,{},function(t){if(console.log(t),200==t.status){var e=t.data.newsList,n=t.data.rightNewsList,s=t.data.Configs,a="",i="",o=t.data.count,r="";e?(e.forEach(function(t){a+='<li>\n                                    <a href="./news.html?id='+t.str_id+'">\n                                        <div class="img-infos">\n                                            <img src="'+(u.site+t.str_thumb)+'" alt="">\n                                        </div>\n                                        <div class="des-infos">\n                                            <h3>'+t.str_title+"</h3>\n                                            <p>"+t.str_guide+"</p>\n                                            <span>"+t.news_time+"</span>\n                                        </div>\n                                    </a>\n                                </li>"}),$("#news-section>ul").append(a).after('<p class="tips">没有更多了</p>')):$("#news-section>ul").append("<h1>Sorry,这里还什么都没有</h1>"),s&&s.forEach(function(t){var e='meta[name="'+t.name+'"]';"title"==t.name?$("title").text(t.value):$(e)[0]?$(e).attr("content",t.value):$("head").append('<meta name="'+t.name+'" content="'+t.value+'" />')}),n?(n.forEach(function(t){i+='<li>\n                                    <a href="./news.html?id='+t.str_id+'">\n                                        <div class="img-infos">\n                                            <img src="'+(u.site+t.str_thumb)+'" alt="">\n                                        </div>\n                                        <div class="des-infos">\n                                            <h3>'+t.str_title+"</h3>\n                                            <p>"+t.news_time+"</p>\n                                        </div>\n                                    </a>\n                                </li>"}),$("#news-aside-list").append(i)):$("#news-aside-list").append("<h1>Sorry,这里还什么都没有</h1>"),u.pagesLength=Math.ceil(o/8);for(var l=1;l<=u.pagesLength;l++)console.log(l),r+=l==c?'<li class="active" data-page="'+l+'">'+l+"</li>":'<li data-page="'+l+'">'+l+"</li>";$("#show-pages").html(r)}else alert(t.message)})},setCrumb:function(){var t=this.getQueryString("type"),e=$("#crumb>span"),n=$("#aside-title");9==t&&(e.text("行动新闻列表"),n.text("公益明星").next().attr("href","/newsList.html?type=8"))},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e),s="";return null!=n&&(s=n[2]),(n=e=null)==s||""==s||"undefined"==s?"":s},imgLoad:function(){var t=new Image;t.onload=function(){console.log("success")},t.onerror=function(){this.src=that.site+ +this.src}},getAjax:function(t,e,n,s){$.ajax({type:"GET",url:this.site+t,data:e,dataType:"JSON",success:n,fail:s})},postAjax:function(t,e,n,s){$.ajax({type:"POST",url:this.site+t,data:e,dataType:"json",success:n,fail:s})},init:function(){var e=this;e.getInfos(),e.setCrumb(),$("#show-pages").on("click","li",function(){if(!$(this).hasClass("active")){var t=$(this).attr("data-page");e.getInfos(t)}})}}).init()});
//# sourceMappingURL=newslists.js.map
