"use strict";$(function(){jQuery.support.cors=!0;window.Base;({site:"https://www.doubaner.top",getInfos:function(){var o=this,t="/news/page/1/column/"+o.getQueryString("type");o.getAjax(t,{},function(t){if(console.log(t),200==t.status){var n=t.data.newsList,e=t.data.rightNewsList,s=t.data.Configs,i="",a="";n?(n.forEach(function(t){i+='<li>\n                                    <a href="./news.html?id='+t.str_id+'">\n                                        <div class="img-infos">\n                                            <img src="'+(o.site+t.str_thumb)+'" alt="">\n                                        </div>\n                                        <div class="des-infos">\n                                            <h3>'+t.str_title+"</h3>\n                                            <p>"+t.str_guide+"</p>\n                                            <span>"+t.news_time+"</span>\n                                        </div>\n                                    </a>\n                                </li>"}),$("#news-section>ul").append(i).after('<p class="tips">没有更多了</p>')):$("#news-section>ul").append("<h1>Sorry,这里还什么都没有</h1>"),s&&s.forEach(function(t){var n='meta[name="'+t.name+'"]';"title"==t.name?$("title").text(t.value):$(n)[0]?$(n).attr("content",t.value):$("head").append('<meta name="'+t.name+'" content="'+t.value+'" />')}),e?(e.forEach(function(t){a+='<li>\n                                    <a href="./news.html?id='+t.str_id+'">\n                                        <div class="img-infos">\n                                            <img src="'+(o.site+t.str_thumb)+'" alt="">\n                                        </div>\n                                        <div class="des-infos">\n                                            <h3>'+t.str_title+"</h3>\n                                            <p>"+t.news_time+"</p>\n                                        </div>\n                                    </a>\n                                </li>"}),$("#news-aside-list").append(a)):$("#news-aside-list").append("<h1>Sorry,这里还什么都没有</h1>")}else alert(t.message)})},setCrumb:function(){var t=this.getQueryString("type"),n=$("#crumb>span"),e=$("#aside-title");9==t&&(n.text("行动新闻列表"),e.text("公益明星").next().attr("href","/newsList.html?type=8"))},getQueryString:function(t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),e=window.location.search.substr(1).match(n),s="";return null!=e&&(s=e[2]),(e=n=null)==s||""==s||"undefined"==s?"":s},imgLoad:function(){var t=new Image;t.onload=function(){console.log("success")},t.onerror=function(){this.src=that.site+ +this.src}},getAjax:function(t,n,e,s){$.ajax({type:"GET",url:this.site+t,data:n,dataType:"JSON",success:e,fail:s})},postAjax:function(t,n,e,s){$.ajax({type:"POST",url:this.site+t,data:n,dataType:"json",success:e,fail:s})},init:function(){console.log("111");this.getInfos(),this.setCrumb()}}).init()});
//# sourceMappingURL=newslists.js.map
