"use strict";$(function(){jQuery.support.cors=!0;window.Base;({site:"https://www.doubaner.top",payValue:197,payOrder:function(a){var e=this,t={},n=$("input[name=receipt]:checked").val();console.log(n),t.username=$("#name").val(),t.sex=$("input[name=appellation]:checked").val(),t.phone=$("#phone").val(),t.email=$("#email").val(),t.way=a.attr("data-type"),t.total_fee=e.payValue?e.payValue:$("pay-value").val(),t.invoicing=n?$("#select-choice").val():0,t.invoice=$("#organ-name").val(),t.TaxID=$("#organ-name").val(),t.address=$("#address").val(),t.username?($("#name").next("span").text(""),/^1[3-8]\d{9}$/.test(t.phone)?($("#phone").next("span").text(""),/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g.test(t.email)?($("#email").next("span").text(""),t.address?($("#address").next("span").text(""),!n||t.invoice?($("#organ-name").next("span").text(""),!n||t.TaxID?($("#taxid").next("span").text(""),console.log(t),e.postAjax("/pay",t,function(a){console.log(a)})):$("#taxid").next("span").text("请输入税号")):$("#organ-name").next("span").text("请输入发票抬头")):$("#address").next("span").text("邮寄地址不能为空")):$("#email").next("span").text("电子邮箱格式不对")):$("#phone").next("span").text("手机号码格式不对")):$("#name").next("span").text("您还没有填写名字呢")},blurCheck:function(a){var e=a.val(),t=a.attr("data-check");console.log(e);var n=$("input[name=receipt]:checked").val();switch(t){case"name":e?$("#name").next("span").text(""):$("#name").next("span").text("您还没有填写名字呢");break;case"pay":console.log("111"),e<100?($("#form-group input[data-check]:not([data-check='name']),.receipt-radio").parent().hide(),$("#form-group :radio[name='appellation'] ").parent().parent().hide()):($("#form-group input[data-check]:not([data-check='name']),.receipt-radio").parent().show(),$("#form-group :radio[name='appellation'] ").parent().parent().show());break;case"phone":/^1[3-8]\d{9}$/.test(e)?$("#phone").next("span").text(""):$("#phone").next("span").text("手机号码格式不对");break;case"email":/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g.test(e)?$("#email").next("span").text(""):$("#email").next("span").text("电子邮箱格式不对");break;case"address":e?$("#address").next("span").text(""):$("#address").next("span").text("邮寄地址不能为空");break;case"organ-name":n&&!e?$("#organ-name").next("span").text("请输入发票抬头1"):$("#organ-name").next("span").text("");break;case"taxid":n&&!e?$("#taxid").next("span").text("请输入税号"):$("#taxid").next("span").text("")}},changePayValue:function(a){var e=a.attr("data-value");a.addClass("active").siblings().removeClass("active"),e&&(this.payValue=e)},getQueryString:function(a){var e=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(e),n="";return null!=t&&(n=t[2]),(t=e=null)==n||""==n||"undefined"==n?"":n},imgLoad:function(){var a=new Image;a.onload=function(){console.log("success")},a.onerror=function(){this.src=that.site+ +this.src}},getAjax:function(a,e,t,n){$.ajax({type:"GET",url:this.site+a,data:e,dataType:"JSON",success:t,fail:n})},postAjax:function(a,e,t,n){$.ajax({type:"POST",url:this.site+a,data:e,dataType:"json",success:t,fail:n})},init:function(){var e=this;$("#pay-methods>img").on("click",function(){var a=$(this);e.payOrder(a)}),$("#pay-methods-list>li").on("click",function(){var a=$(this);e.changePayValue(a)}),$("#form-group input[data-check],#pay-value").on("blur",function(){var a=$(this);e.blurCheck(a)})}}).init()});
//# sourceMappingURL=donate.js.map
