"use strict";$(function(){jQuery.support.cors=!0;window.Base;({site:"https://www.doubaner.top",check:!1,payValue:197,modalShow:!1,checkForms:function(e){var a=this,t={},n=/^1[3-8]\d{9}$/,o=/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g,s=$("input[name=invoicing]:checked").val();return t.username=$("#username").val(),t.sex=$("input[name=sex]:checked").val(),t.phone=$("#phone").val(),t.email=$("#email").val(),t.total_fee=a.payValue?a.payValue:$("pay-value").val(),t.invoicing=s?$("#select-choice").val():0,t.invoice=$("#organ-name").val(),t.TaxID=$("#organ-name").val(),t.address=$("#address").val(),1==e?t.username?($("#name").next("span").text(""),n.test(t.phone)?($("#phone").next("span").text(""),o.test(t.email)?($("#email").next("span").text(""),t.address?($("#address").next("span").text(""),s&&!t.invoice?void $("#organ-name").next("span").text("请输入发票抬头"):($("#organ-name").next("span").text(""),s&&!t.TaxID?void $("#taxid").next("span").text("请输入税号"):($("#taxid").next("span").text(""),a.check=!0,t))):void $("#address").next("span").text("邮寄地址不能为空")):void $("#email").next("span").text("电子邮箱格式不对")):void $("#phone").next("span").text("手机号码格式不对")):void $("#name").next("span").text("您还没有填写名字呢"):2==e?t.username?($("#name").next("span").text(""),n.test(t.phone)?($("#phone").next("span").text(""),o.test(t.email)?($("#email").next("span").text(""),t.address?($("#address").next("span").text(""),a.check=!0,t):void $("#address").next("span").text("邮寄地址不能为空")):void $("#email").next("span").text("电子邮箱格式不对")):void $("#phone").next("span").text("手机号码格式不对")):void $("#name").next("span").text("您还没有填写名字呢"):t.username?($("#name").next("span").text(""),a.check=!0,t):void $("#name").next("span").text("您还没有填写名字呢")},modalHide:function(){$("#qrcode-modal").hide(),this.modalShow=!1},payOrder:function(e){var a=this,t=null,n=a.payValue,o=e.attr("data-type"),s=$("#form-group input[name=receipt]").val();t=100<n?s?a.checkForms(1):a.checkForms(2):a.checkForms(0),a.check&&(t.way=o,console.log(t),$("#pay-form").submit())},blurCheck:function(e){var a=this,t=e.val(),n=e.attr("data-check"),o=$("input[name=receipt]:checked").val();switch(n){case"name":t?$("#name").next("span").text(""):$("#name").next("span").text("您还没有填写名字呢");break;case"pay":t<100?a.toggleForms(!1):a.toggleForms(!0),a.payValue=t;break;case"phone":/^1[3-8]\d{9}$/.test(t)?$("#phone").next("span").text(""):$("#phone").next("span").text("手机号码格式不对");break;case"email":/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g.test(t)?$("#email").next("span").text(""):$("#email").next("span").text("电子邮箱格式不对");break;case"address":t?$("#address").next("span").text(""):$("#address").next("span").text("邮寄地址不能为空");break;case"organ-name":o&&!t?$("#organ-name").next("span").text("请输入发票抬头1"):$("#organ-name").next("span").text("");break;case"taxid":o&&!t?$("#taxid").next("span").text("请输入税号"):$("#taxid").next("span").text("")}},changePayValue:function(e){var a=e.attr("data-value");e.addClass("active").siblings().removeClass("active"),a&&(this.payValue=a),"3"!=e.index()&&($("#pay-value").val(""),this.toggleForms(!0))},getCheck:function(e){e.val()?$("#form-group .receipt-choice").show():$("#form-group .receipt-choice").hide()},toggleForms:function(e){e?($("#form-group input[data-check]:not([data-check='name']),.receipt-radio").parent().show(),$("#form-group :radio[name='appellation'] ").parent().parent().show()):($("#form-group input[data-check]:not([data-check='name']),.receipt-radio").parent().hide(),$("#form-group :radio[name='appellation'] ").parent().parent().hide())},getQueryString:function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(a),n="";return null!=t&&(n=t[2]),(t=a=null)==n||""==n||"undefined"==n?"":n},imgLoad:function(){var e=new Image;e.onload=function(){},e.onerror=function(){this.src=that.site+ +this.src}},getAjax:function(e,a,t,n){$.ajax({type:"GET",url:this.site+e,data:a,dataType:"JSON",success:t,fail:n})},postAjax:function(e,a,t,n){$.ajax({type:"POST",url:this.site+e,data:a,dataType:"json",success:t,fail:n})},setSeo:function(){this.getAjax("/seo",{},function(e){console.log(e),200==e.status?($("title").text(e.data.title),$("meta[name='keywords']").attr("content",e.data.keywords),$("meta[name='description']").attr("content",e.data.description)):alert(e.message)})},init:function(){var a=this;a.setSeo(),$("#pay-now").on("click",function(){var e=$(this);a.payOrder(e)}),$("#pay-methods-list>li").on("click",function(){var e=$(this);a.changePayValue(e)}),$("#form-group input[data-check],#pay-value").on("blur",function(){var e=$(this);a.blurCheck(e)}),$("#form-group input[name=receipt]").on("change",function(){var e=$(this);a.getCheck(e)}),$("body,#qrcode-modal span").on("click",function(){a.modalShow&&a.modalHide()})}}).init()});
//# sourceMappingURL=donate.js.map
