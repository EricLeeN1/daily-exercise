"use strict";
$(function () {
    jQuery.support.cors = !0;
    window.Base;
    ({
        site: "https://www.doubaner.top",
        check: !1,
        payValue: 197,
        modalShow: !1,
        checkForms: function (e) {
            var t = this,
                a = {},
                n = /^1[3-8]\d{9}$/,
                o = /^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g,
                s = $("input[name=invoicing]:checked").val();
            return a.username = $("#username").val(), a.sex = $("input[name=sex]:checked").val(), a.phone = $("#phone").val(), a.email = $("#email").val(), a.total_fee = $("input[name=total_fee]").val(), a.invoicing = s ? $("#select-choice").val() : 0, a.invoice = $("#organ-name").val(), a.TaxID = $("#organ-name").val(), a.address = $("#address").val(), 1 == e ? a.username ? ($("#name").next("span").text(""), n.test(a.phone) ? ($("#phone").next("span").text(""), o.test(a.email) ? ($("#email").next("span").text(""), a.address ? ($("#address").next("span").text(""), s && !a.invoice ? void $("#organ-name").next("span").text("请输入发票抬头") : ($("#organ-name").next("span").text(""), s && !a.TaxID ? void $("#taxid").next("span").text("请输入税号") : ($("#taxid").next("span").text(""), t.check = !0, a))) : void $("#address").next("span").text("邮寄地址不能为空")) : void $("#email").next("span").text("电子邮箱格式不对")) : void $("#phone").next("span").text("手机号码格式不对")) : void $("#name").next("span").text("您还没有填写名字呢") : 2 == e ? a.username ? ($("#name").next("span").text(""), n.test(a.phone) ? ($("#phone").next("span").text(""), o.test(a.email) ? ($("#email").next("span").text(""), a.address ? ($("#address").next("span").text(""), t.check = !0, a) : void $("#address").next("span").text("邮寄地址不能为空")) : void $("#email").next("span").text("电子邮箱格式不对")) : void $("#phone").next("span").text("手机号码格式不对")) : void $("#name").next("span").text("您还没有填写名字呢") : a.username ? ($("#name").next("span").text(""), t.check = !0, a) : void $("#name").next("span").text("您还没有填写名字呢")
        },
        modalHide: function () {
            $("#qrcode-modal").hide(), this.modalShow = !1
        },
        payOrder: function (e) {
            var t = this,
                a = null,
                n = t.payValue,
                o = e.attr("data-type"),
                s = $("#form-group input[name=receipt]").val();
            a = 100 < n ? s ? t.checkForms(1) : t.checkForms(2) : t.checkForms(0), t.check && (a.way = o, console.log(a), $("#pay-form").submit())
        },
        blurCheck: function (e) {
            console.log(111);
            var t = this,
                a = e.val(),
                n = e.attr("data-check"),
                o = $("input[name=receipt]:checked").val();
            switch (n) {
                case "name":
                    a ? $("#name").next("span").text("") : $("#name").next("span").text("您还没有填写名字呢");
                    break;
                case "pay":
                    a < 100 ? (t.toggleForms(!1), $("#pay-input").val(a)) : ($("#pay-input").val(a), t.toggleForms(!0)), t.payValue = a;
                    break;
                case "phone":
                    /^1[3-8]\d{9}$/.test(a) ? $("#phone").next("span").text("") : $("#phone").next("span").text("手机号码格式不对");
                    break;
                case "email":
                    /^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g.test(a) ? $("#email").next("span").text("") : $("#email").next("span").text("电子邮箱格式不对");
                    break;
                case "address":
                    a ? $("#address").next("span").text("") : $("#address").next("span").text("邮寄地址不能为空");
                    break;
                case "organ-name":
                    o && !a ? $("#organ-name").next("span").text("请输入发票抬头1") : $("#organ-name").next("span").text("");
                    break;
                case "taxid":
                    o && !a ? $("#taxid").next("span").text("请输入税号") : $("#taxid").next("span").text("")
            }
        },
        changePayValue: function (e) {
            var t = this,
                a = e.attr("data-value");
            e.addClass("active").siblings().removeClass("active"), a && (t.payValue = a, e.children("input[name=total_fee]").attr("checked", !0), e.siblings().children("input[name=total_fee]").attr("checked", !1)), t.payValue = a, e.children("input[name=total_fee]").attr("checked", !0), e.siblings().children("input[name=total_fee]").attr("checked", !1), $("#total_fee").val(""), t.toggleForms(!0)
        },
        getCheck: function (e) {
            e.val() ? $("#form-group .receipt-choice").show() : $("#form-group .receipt-choice").hide()
        },
        toggleForms: function (e) {
            e ? ($("#form-group input[data-check]:not([data-check='name']),.receipt-radio").parent().show(), $("#form-group :radio[name='appellation'] ").parent().parent().show()) : ($("#form-group input[data-check]:not([data-check='name']),.receipt-radio").parent().hide(), $("#form-group :radio[name='appellation'] ").parent().parent().hide())
        },
        getQueryString: function (e) {
            var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)", "i"),
                a = window.location.search.substr(1).match(t),
                n = "";
            return null != a && (n = a[2]), (a = t = null) == n || "" == n || "undefined" == n ? "" : n
        },
        imgLoad: function () {
            var e = new Image;
            e.onload = function () {}, e.onerror = function () {
                this.src = that.site + +this.src
            }
        },
        getAjax: function (e, t, a, n) {
            $.ajax({
                type: "GET",
                url: this.site + e,
                data: t,
                dataType: "JSON",
                success: a,
                fail: n
            })
        },
        postAjax: function (e, t, a, n) {
            $.ajax({
                type: "POST",
                url: this.site + e,
                data: t,
                dataType: "json",
                success: a,
                fail: n
            })
        },
        setSeo: function () {
            this.getAjax("/seo", {}, function (e) {
                console.log(e), 200 == e.status ? ($("title").text(e.data.title), $("meta[name='keywords']").attr("content", e.data.keywords), $("meta[name='description']").attr("content", e.data.description)) : alert(e.message)
            })
        },
        init: function () {
            var t = this;
            t.setSeo(), $("#pay-now").on("click", function () {
                var e = $(this);
                t.payOrder(e)
            }), $("#pay-methods-list>li").on("click", function () {
                var e = $(this);
                t.changePayValue(e)
            }), $("#form-group input[data-check],#total_fee").on("blur", function () {
                var e = $(this);
                t.blurCheck(e)
            }), $("#form-group input[name=receipt]").on("change", function () {
                var e = $(this);
                t.getCheck(e)
            }), $("body,#qrcode-modal span").on("click", function () {
                t.modalShow && t.modalHide()
            })
        }
    }).init()
});
//# sourceMappingURL=donate.js.map