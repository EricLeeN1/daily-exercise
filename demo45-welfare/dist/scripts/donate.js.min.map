{"version":3,"sources":["donate.js"],"names":["$","jQuery","support","cors","window","Base","site","e","payValue","this","params","regPhone","val","console","regEmail","invoicing","username","sex","phone","email","that","way","total_fee","invoice","next","text","test","address","TaxID","log","postAjax","res","blurCheck","attr","value","checkType","optionCheck","parent","hide","show","changePayValue","ele","siblings","removeClass","addClass","getQueryString","name","reg","RegExp","r","location","search","substr","match","context","imgLoad","image","Image","onload","onerror","src","getAjax","url","datas","fns","fnf","ajax","type","data","dataType","success","init","on","_this"],"mappings":"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","file":"donate.js","sourcesContent":["$(function () {\r\n    jQuery.support.cors = true;\r\n    let Base = window.Base || {};\r\n    Base = {\r\n        site: 'https://www.doubaner.top',\r\n        payValue: 197,\r\n        payOrder(e) {\r\n            let that = this;\r\n            let params = {};\r\n            let regPhone = /^1[3-8]\\d{9}$/;\r\n            let regEmail = /^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/g;;\r\n            let invoicing = $(\"input[name=receipt]:checked\").val();\r\n            console.log(invoicing);\r\n            params.username = $(\"#name\").val();\r\n            params.sex = $(\"input[name=appellation]:checked\").val();\r\n            params.phone = $(\"#phone\").val();\r\n            params.email = $(\"#email\").val();\r\n            params.way = e.attr('data-type');\r\n            params.total_fee = that.payValue ? that.payValue : $(\"pay-value\").val();\r\n            params.invoicing = invoicing ? $(\"#select-choice\").val() : 0;\r\n            params.invoice = $(\"#organ-name\").val();\r\n            params.TaxID = $(\"#organ-name\").val();\r\n            params.address = $(\"#address\").val();\r\n            if (!params.username) {\r\n                $(\"#name\").next('span').text(\"您还没有填写名字呢\");\r\n                return;\r\n            } else {\r\n                $(\"#name\").next('span').text(\"\");\r\n            }\r\n            if (!regPhone.test(params.phone)) {\r\n                $(\"#phone\").next('span').text(\"手机号码格式不对\");\r\n                return;\r\n            } else {\r\n                $(\"#phone\").next('span').text(\"\");\r\n            }\r\n            if (!regEmail.test(params.email)) {\r\n                $(\"#email\").next('span').text(\"电子邮箱格式不对\");\r\n                return;\r\n            } else {\r\n                $(\"#email\").next('span').text(\"\");\r\n            }\r\n            if (!params.address) {\r\n                $(\"#address\").next('span').text(\"邮寄地址不能为空\");\r\n                return;\r\n            } else {\r\n                $(\"#address\").next('span').text(\"\");\r\n            }\r\n            if (invoicing && !params.invoice) {\r\n                $(\"#organ-name\").next('span').text(\"请输入发票抬头\");\r\n                return;\r\n            } else {\r\n                $(\"#organ-name\").next('span').text(\"\");\r\n            }\r\n            if (invoicing && !params.TaxID) {\r\n                $(\"#taxid\").next('span').text(\"请输入税号\");\r\n                return;\r\n            } else {\r\n                $(\"#taxid\").next('span').text(\"\");\r\n            };\r\n            console.log(params);\r\n            that.postAjax('/pay', params, function (res) {\r\n                console.log(res);\r\n            })\r\n        },\r\n        blurCheck(e) {\r\n            let regPhone = /^1[3-8]\\d{9}$/;\r\n            let regEmail = /^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/g;\r\n            let value = e.val();\r\n            let checkType = e.attr('data-check');\r\n            console.log(value);\r\n            let optionCheck = $(\"input[name=receipt]:checked\").val();\r\n            switch (checkType) {\r\n                case \"name\":\r\n                    if (!value) {\r\n                        $(\"#name\").next('span').text(\"您还没有填写名字呢\");\r\n                    } else {\r\n                        $(\"#name\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"pay\":\r\n                    console.log('111');\r\n                    if (value < 100) {\r\n                        $(\"#form-group input[data-check]:not([data-check='name']),.receipt-radio\").parent().hide();\r\n                        $(\"#form-group :radio[name='appellation'] \").parent().parent().hide();\r\n                    } else {\r\n                        $(\"#form-group input[data-check]:not([data-check='name']),.receipt-radio\").parent().show();\r\n                        $(\"#form-group :radio[name='appellation'] \").parent().parent().show();\r\n                    }\r\n                    break;\r\n                case \"phone\":\r\n                    if (!regPhone.test(value)) {\r\n                        $(\"#phone\").next('span').text(\"手机号码格式不对\");\r\n                    } else {\r\n                        $(\"#phone\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"email\":\r\n                    if (!regEmail.test(value)) {\r\n                        $(\"#email\").next('span').text(\"电子邮箱格式不对\");\r\n                    } else {\r\n                        $(\"#email\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"address\":\r\n                    if (!value) {\r\n                        $(\"#address\").next('span').text(\"邮寄地址不能为空\");\r\n                    } else {\r\n                        $(\"#address\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"organ-name\":\r\n                    if (optionCheck && !value) {\r\n                        $(\"#organ-name\").next('span').text(\"请输入发票抬头1\");\r\n                    } else {\r\n                        $(\"#organ-name\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                case \"taxid\":\r\n                    if (optionCheck && !value) {\r\n                        $(\"#taxid\").next('span').text(\"请输入税号\");\r\n                    } else {\r\n                        $(\"#taxid\").next('span').text(\"\");\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n        changePayValue(ele) {\r\n            let that = this;\r\n            let value = ele.attr('data-value');\r\n            ele.addClass('active').siblings().removeClass('active');\r\n            if (value) {\r\n                that.payValue = value;\r\n            }\r\n        },\r\n        getQueryString: function (name) {\r\n            var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n            var r = window.location.search.substr(1).match(reg); //获取url中\"?\"符后的字符串并正则匹配\r\n            var context = \"\";\r\n            if (r != null)\r\n                context = r[2];\r\n            reg = null;\r\n            r = null;\r\n            return context == null || context == \"\" || context == \"undefined\" ? \"\" : context;\r\n        },\r\n        imgLoad() {\r\n            let image = new Image();\r\n            image.onload = function () {\r\n                    console.log('success');\r\n                },\r\n                image.onerror = function () {\r\n                    this.src = that.site + +this.src;\r\n                }\r\n        },\r\n        getAjax(url, datas, fns, fnf) {\r\n            $.ajax({\r\n                type: \"GET\",\r\n                url: this.site + url,\r\n                data: datas,\r\n                dataType: 'JSON',\r\n                success: fns,\r\n                fail: fnf\r\n            });\r\n        },\r\n        postAjax(url, datas, fns, fnf) {\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: this.site + url,\r\n                data: datas,\r\n                dataType: 'json',\r\n                success: fns,\r\n                fail: fnf\r\n            });\r\n        },\r\n        init() {\r\n            let that = this;\r\n            $(\"#pay-methods>img\").on('click', function () {\r\n                let _this = $(this);\r\n                that.payOrder(_this);\r\n            });\r\n            $(\"#pay-methods-list>li\").on('click', function () {\r\n                let _this = $(this);\r\n                that.changePayValue(_this);\r\n            });\r\n            $(\"#form-group input[data-check],#pay-value\").on('blur', function () {\r\n                let _this = $(this);\r\n                that.blurCheck(_this);\r\n            });\r\n        }\r\n    }\r\n    Base.init();\r\n});"]}